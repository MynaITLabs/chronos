/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";Number.prototype.map=function(istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((this-istart)/(istop-istart));};Number.prototype.limit=function(min,max){return Math.min(max,Math.max(min,this));};Number.prototype.round=function(precision){precision=Math.pow(10,precision||0);return Math.round(this*precision)/precision;};Number.prototype.floor=function(){return Math.floor(this);};Number.prototype.ceil=function(){return Math.ceil(this);};Number.prototype.toInt=function(){return(this|0);};Number.prototype.toRad=function(){return(this/180)*Math.PI;};Number.prototype.toDeg=function(){return(this*180)/Math.PI;};Array.prototype.erase=function(item){for(var i=this.length;i--;){if(this[i]===item){this.splice(i,1);}}
return this;};Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)];};Function.prototype.bind=Function.prototype.bind||function(oThis){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply((this instanceof fNOP&&oThis?this:oThis),aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};window.ig={game:null,debug:null,version:'1.21',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},prefix:(window.ImpactPrefix||''),lib:'lib/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw('Unresolved (circular?) dependencies. '+"Most likely there's a name/path mismatch for one of the listed modules:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2);ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android;},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}}};ig.normalizeVendorAttribute(window,'requestAnimationFrame');if(window.requestAnimationFrame){var next=1,anims={};window.ig.setAnimation=function(callback,element){var current=next++;anims[current]=true;var animate=function(){if(!anims[current]){return;}
window.requestAnimationFrame(animate,element);callback();};window.requestAnimationFrame(animate,element);return current;};window.ig.clearAnimation=function(id){delete anims[id];};}
else{window.ig.setAnimation=function(callback,element){return window.setInterval(callback,1000/60);};window.ig.clearAnimation=function(id){window.clearInterval(id);};}
var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;return Class;};})(window);

// lib/impact/image.js
ig.baked=true;ig.module('impact.image').defines(function(){"use strict";ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:false,failed:false,loadCallback:null,path:'',staticInstantiate:function(path){return ig.Image.cache[path]||null;},init:function(path){this.path=path;this.load();},load:function(loadCallback){if(this.loaded){if(loadCallback){loadCallback(this.path,true);}
return;}
else if(!this.loaded&&ig.ready){this.loadCallback=loadCallback||null;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache;}
else{ig.addResource(this);}
ig.Image.cache[this.path]=this;},reload:function(){this.loaded=false;this.data=new Image();this.data.onload=this.onload.bind(this);this.data.src=this.path+'?'+Date.now();},onload:function(event){this.width=this.data.width;this.height=this.data.height;this.loaded=true;if(ig.system.scale!=1){this.resize(ig.system.scale);}
if(this.loadCallback){this.loadCallback(this.path,true);}},onerror:function(event){this.failed=true;if(this.loadCallback){this.loadCallback(this.path,false);}},resize:function(scale){var origPixels=ig.getImagePixels(this.data,0,0,this.width,this.height);var widthScaled=this.width*scale;var heightScaled=this.height*scale;var scaled=ig.$new('canvas');scaled.width=widthScaled;scaled.height=heightScaled;var scaledCtx=scaled.getContext('2d');var scaledPixels=scaledCtx.getImageData(0,0,widthScaled,heightScaled);for(var y=0;y<heightScaled;y++){for(var x=0;x<widthScaled;x++){var index=(Math.floor(y/scale)*this.width+Math.floor(x/scale))*4;var indexScaled=(y*widthScaled+x)*4;scaledPixels.data[indexScaled]=origPixels.data[index];scaledPixels.data[indexScaled+1]=origPixels.data[index+1];scaledPixels.data[indexScaled+2]=origPixels.data[index+2];scaledPixels.data[indexScaled+3]=origPixels.data[index+3];}}
scaledCtx.putImageData(scaledPixels,0,0);this.data=scaled;},draw:function(targetX,targetY,sourceX,sourceY,width,height){if(!this.loaded){return;}
var scale=ig.system.scale;sourceX=sourceX?sourceX*scale:0;sourceY=sourceY?sourceY*scale:0;width=(width?width:this.width)*scale;height=(height?height:this.height)*scale;ig.system.context.drawImage(this.data,sourceX,sourceY,width,height,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),width,height);ig.Image.drawCount++;},drawTile:function(targetX,targetY,tile,tileWidth,tileHeight,flipX,flipY){tileHeight=tileHeight?tileHeight:tileWidth;if(!this.loaded||tileWidth>this.width||tileHeight>this.height){return;}
var scale=ig.system.scale;var tileWidthScaled=Math.floor(tileWidth*scale);var tileHeightScaled=Math.floor(tileHeight*scale);var scaleX=flipX?-1:1;var scaleY=flipY?-1:1;if(flipX||flipY){ig.system.context.save();ig.system.context.scale(scaleX,scaleY);}
ig.system.context.drawImage(this.data,(Math.floor(tile*tileWidth)%this.width)*scale,(Math.floor(tile*tileWidth/this.width)*tileHeight)*scale,tileWidthScaled,tileHeightScaled,ig.system.getDrawPos(targetX)*scaleX-(flipX?tileWidthScaled:0),ig.system.getDrawPos(targetY)*scaleY-(flipY?tileHeightScaled:0),tileWidthScaled,tileHeightScaled);if(flipX||flipY){ig.system.context.restore();}
ig.Image.drawCount++;}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var path in ig.Image.cache){ig.Image.cache[path].reload();}};});

// lib/impact/font.js
ig.baked=true;ig.module('impact.font').requires('impact.image').defines(function(){"use strict";ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(ev){this._loadMetrics(this.data);this.parent(ev);},widthForString:function(text){if(text.indexOf('\n')!==-1){var lines=text.split('\n');var width=0;for(var i=0;i<lines.length;i++){width=Math.max(width,this._widthForLine(lines[i]));}
return width;}
else{return this._widthForLine(text);}},_widthForLine:function(text){var width=0;for(var i=0;i<text.length;i++){width+=this.widthMap[text.charCodeAt(i)-this.firstChar]+this.letterSpacing;}
return width;},heightForString:function(text){return text.split('\n').length*(this.height+this.lineSpacing);},draw:function(text,x,y,align){if(typeof(text)!='string'){text=text.toString();}
if(text.indexOf('\n')!==-1){var lines=text.split('\n');var lineHeight=this.height+this.lineSpacing;for(var i=0;i<lines.length;i++){this.draw(lines[i],x,y+i*lineHeight,align);}
return;}
if(align==ig.Font.ALIGN.RIGHT||align==ig.Font.ALIGN.CENTER){var width=this._widthForLine(text);x-=align==ig.Font.ALIGN.CENTER?width/2:width;}
if(this.alpha!==1){ig.system.context.globalAlpha=this.alpha;}
for(var i=0;i<text.length;i++){var c=text.charCodeAt(i);x+=this._drawChar(c-this.firstChar,x,y);}
if(this.alpha!==1){ig.system.context.globalAlpha=1;}
ig.Image.drawCount+=text.length;},_drawChar:function(c,targetX,targetY){if(!this.loaded||c<0||c>=this.indices.length){return 0;}
var scale=ig.system.scale;var charX=this.indices[c]*scale;var charY=0;var charWidth=this.widthMap[c]*scale;var charHeight=(this.height-2)*scale;ig.system.context.drawImage(this.data,charX,charY,charWidth,charHeight,ig.system.getDrawPos(targetX),ig.system.getDrawPos(targetY),charWidth,charHeight);return this.widthMap[c]+this.letterSpacing;},_loadMetrics:function(image){this.height=image.height-1;this.widthMap=[];this.indices=[];var px=ig.getImagePixels(image,0,image.height-1,image.width,1);var currentChar=0;var currentWidth=0;for(var x=0;x<image.width;x++){var index=x*4+3;if(px.data[index]>127){currentWidth++;}
else if(px.data[index]==0&&currentWidth){this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);currentChar++;currentWidth=0;}}
this.widthMap.push(currentWidth);this.indices.push(x-currentWidth);}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2};});

// lib/impact/sound.js
ig.baked=true;ig.module('impact.sound').defines(function(){"use strict";ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio){ig.Sound.enabled=false;return;}
var probe=new Audio();for(var i=0;i<ig.Sound.use.length;i++){var format=ig.Sound.use[i];if(probe.canPlayType(format.mime)){this.format=format;break;}}
if(!this.format){ig.Sound.enabled=false;}},load:function(path,multiChannel,loadCallback){var realPath=ig.prefix+path.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[path]){if(multiChannel&&this.clips[path].length<ig.Sound.channels){for(var i=this.clips[path].length;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return this.clips[path][0];}
var clip=new Audio(realPath);if(loadCallback){clip.addEventListener('canplaythrough',function cb(ev){clip.removeEventListener('canplaythrough',cb,false);loadCallback(path,true,ev);},false);clip.addEventListener('error',function(ev){loadCallback(path,false,ev);},false);}
clip.preload='auto';clip.load();this.clips[path]=[clip];if(multiChannel){for(var i=1;i<ig.Sound.channels;i++){var a=new Audio(realPath);a.load();this.clips[path].push(a);}}
return clip;},get:function(path){var channels=this.clips[path];for(var i=0,clip;clip=channels[i++];){if(clip.paused||clip.ended){if(clip.ended){clip.currentTime=0;}
return clip;}}
channels[0].pause();channels[0].currentTime=0;return channels[0];}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:false,_volume:1,_loop:false,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);if(Object.defineProperty){Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});}
else if(this.__defineGetter__){this.__defineGetter__('volume',this.getVolume.bind(this));this.__defineSetter__('volume',this.setVolume.bind(this));this.__defineGetter__('loop',this.getLooping.bind(this));this.__defineSetter__('loop',this.setLooping.bind(this));}},add:function(music,name){if(!ig.Sound.enabled){return;}
var path=music instanceof ig.Sound?music.path:music;var track=ig.soundManager.load(path,false);track.loop=this._loop;track.volume=this._volume;track.addEventListener('ended',this._endedCallbackBound,false);this.tracks.push(track);if(name){this.namedTracks[name]=track;}
if(!this.currentTrack){this.currentTrack=track;}},next:function(){if(!this.tracks.length){return;}
this.stop();this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length;this.currentTrack=this.tracks[this.currentIndex];this.play();},pause:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();},stop:function(){if(!this.currentTrack){return;}
this.currentTrack.pause();this.currentTrack.currentTime=0;},play:function(name){if(name&&this.namedTracks[name]){var newTrack=this.namedTracks[name];if(newTrack!=this.currentTrack){this.stop();this.currentTrack=newTrack;}}
else if(!this.currentTrack){return;}
this.currentTrack.play();},getLooping:function(){return this._loop;},setLooping:function(l){this._loop=l;for(var i in this.tracks){this.tracks[i].loop=l;}},getVolume:function(){return this._volume;},setVolume:function(v){this._volume=v.limit(0,1);for(var i in this.tracks){this.tracks[i].volume=this._volume;}},fadeOut:function(time){if(!this.currentTrack){return;}
clearInterval(this._fadeInterval);this.fadeTimer=new ig.Timer(time);this._fadeInterval=setInterval(this._fadeStep.bind(this),50);},_fadeStep:function(){var v=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;if(v<=0.01){this.stop();this.currentTrack.volume=this._volume;clearInterval(this._fadeInterval);}
else{this.currentTrack.volume=v;}},_endedCallback:function(){if(this._loop){this.play();}
else{this.next();}}});ig.Sound=ig.Class.extend({path:'',volume:1,currentClip:null,multiChannel:true,init:function(path,multiChannel){this.path=path;this.multiChannel=(multiChannel!==false);this.load();},load:function(loadCallback){if(!ig.Sound.enabled){if(loadCallback){loadCallback(this.path,true);}
return;}
if(ig.ready){ig.soundManager.load(this.path,this.multiChannel,loadCallback);}
else{ig.addResource(this);}},play:function(){if(!ig.Sound.enabled){return;}
this.currentClip=ig.soundManager.get(this.path);this.currentClip.volume=ig.soundManager.volume*this.volume;this.currentClip.play();},stop:function(){if(this.currentClip){this.currentClip.pause();this.currentClip.currentTime=0;}}});ig.Sound.FORMAT={MP3:{ext:'mp3',mime:'audio/mpeg'},M4A:{ext:'m4a',mime:'audio/mp4; codecs=mp4a'},OGG:{ext:'ogg',mime:'audio/ogg; codecs=vorbis'},WEBM:{ext:'webm',mime:'audio/webm; codecs=vorbis'},CAF:{ext:'caf',mime:'audio/x-caf'}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=true;});

// lib/impact/loader.js
ig.baked=true;ig.module('impact.loader').requires('impact.image','impact.font','impact.sound').defines(function(){"use strict";ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:false,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(gameClass,resources){this.gameClass=gameClass;this.resources=resources;this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++){this._unloaded.push(this.resources[i].path);}},load:function(){ig.system.clear('#000');if(!this.resources.length){this.end();return;}
for(var i=0;i<this.resources.length;i++){this.loadResource(this.resources[i]);}
this._intervalId=setInterval(this.draw.bind(this),16);},loadResource:function(res){res.load(this._loadCallbackBound);},end:function(){if(this.done){return;}
this.done=true;clearInterval(this._intervalId);ig.system.setGame(this.gameClass);},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var s=ig.system.scale;var w=ig.system.width*0.6;var h=ig.system.height*0.1;var x=ig.system.width*0.5-w/2;var y=ig.system.height*0.5-h/2;ig.system.context.fillStyle='#000';ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s,h*s);ig.system.context.fillStyle='#000';ig.system.context.fillRect(x*s+s,y*s+s,w*s-s-s,h*s-s-s);ig.system.context.fillStyle='#fff';ig.system.context.fillRect(x*s,y*s,w*s*this._drawStatus,h*s);},_loadCallback:function(path,status){if(status){this._unloaded.erase(path);}
else{throw('Failed to load resource: '+path);}
this.status=1-(this._unloaded.length/this.resources.length);if(this._unloaded.length==0){setTimeout(this.end.bind(this),250);}}});});

// lib/impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=current;};});

// lib/impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer','impact.image').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,init:function(canvasId,fps,width,height,scale){this.fps=fps;this.clock=new ig.Timer();this.canvas=ig.$(canvasId);this.resize(width,height,scale);this.context=this.canvas.getContext('2d');this.getDrawPos=ig.System.drawMode;if(this.scale!=1){ig.System.scaleMode=ig.System.SCALE.CRISP;}
ig.System.scaleMode(this.canvas,this.context);},resize:function(width,height,scale){this.width=width;this.height=height;this.scale=scale||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight;},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;this.startRunLoop();}else{throw('System.setDelegate: No run() function in object');}},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=false;},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=true;},clear:function(color){this.context.fillStyle=color;this.context.fillRect(0,0,this.realWidth,this.realHeight);},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(p){return Math.round(p)*this.scale;},SMOOTH:function(p){return Math.round(p*this.scale);},SUBPIXEL:function(p){return p*this.scale;}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',false);canvas.style.imageRendering='-moz-crisp-edges';canvas.style.imageRendering='-o-crisp-edges';canvas.style.imageRendering='-webkit-optimize-contrast';canvas.style.imageRendering='crisp-edges';canvas.style.msInterpolationMode='nearest-neighbor';},SMOOTH:function(canvas,context){ig.setVendorAttribute(context,'imageSmoothingEnabled',true);canvas.style.imageRendering='';canvas.style.msInterpolationMode='';}};ig.System.scaleMode=ig.System.SCALE.SMOOTH;});

// lib/impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,isUsingAccelerometer:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(this.isUsingMouse){return;}
this.isUsingMouse=true;var mouseWheelBound=this.mousewheel.bind(this);ig.system.canvas.addEventListener('mousewheel',mouseWheelBound,false);ig.system.canvas.addEventListener('DOMMouseScroll',mouseWheelBound,false);ig.system.canvas.addEventListener('contextmenu',this.contextmenu.bind(this),false);ig.system.canvas.addEventListener('mousedown',this.keydown.bind(this),false);ig.system.canvas.addEventListener('mouseup',this.keyup.bind(this),false);ig.system.canvas.addEventListener('mousemove',this.mousemove.bind(this),false);ig.system.canvas.addEventListener('touchstart',this.keydown.bind(this),false);ig.system.canvas.addEventListener('touchend',this.keyup.bind(this),false);ig.system.canvas.addEventListener('touchmove',this.mousemove.bind(this),false);},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},initAccelerometer:function(){if(this.isUsingAccelerometer){return;}
window.addEventListener('devicemotion',this.devicemotion.bind(this),false);},mousewheel:function(event){var delta=event.wheelDelta?event.wheelDelta:(event.detail*-1);var code=delta>0?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN;var action=this.bindings[code];if(action){this.actions[action]=true;this.presses[action]=true;this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},mousemove:function(event){var internalWidth=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;var scale=ig.system.scale*(internalWidth/ig.system.realWidth);var pos={left:0,top:0};if(ig.system.canvas.getBoundingClientRect){pos=ig.system.canvas.getBoundingClientRect();}
var ev=event.touches?event.touches[0]:event;this.mouse.x=(ev.clientX-pos.left)/scale;this.mouse.y=(ev.clientY-pos.top)/scale;},contextmenu:function(event){if(this.bindings[ig.KEY.MOUSE2]){event.stopPropagation();event.preventDefault();}},keydown:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keydown'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(event.type=='touchstart'||event.type=='mousedown'){this.mousemove(event);}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;}
event.stopPropagation();event.preventDefault();}},keyup:function(event){var tag=event.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=event.type=='keyup'?event.keyCode:(event.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();}},devicemotion:function(event){this.accel=event.accelerationIncludingGravity;},bind:function(key,action){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}
this.bindings[key]=action;},bindTouch:function(selector,action){var element=ig.$(selector);var that=this;element.addEventListener('touchstart',function(ev){that.touchStart(ev,action);},false);element.addEventListener('touchend',function(ev){that.touchEnd(ev,action);},false);},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};},touchStart:function(event,action){this.actions[action]=true;this.presses[action]=true;event.stopPropagation();event.preventDefault();return false;},touchEnd:function(event,action){this.delayedKeyup[action]=true;event.stopPropagation();event.preventDefault();return false;}});});

// lib/impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.loader','impact.system','impact.input','impact.sound').defines(function(){"use strict";ig.main=function(canvasId,gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(canvasId,fps,width,height,scale||1);ig.input=new ig.Input();ig.soundManager=new ig.SoundManager();ig.music=new ig.Music();ig.ready=true;var loader=new(loaderClass||ig.Loader)(gameClass,ig.resources);loader.load();};});

// lib/impact/animation.js
ig.baked=true;ig.module('impact.animation').requires('impact.timer','impact.image').defines(function(){"use strict";ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(path,width,height){this.width=width;this.height=height;this.image=new ig.Image(path);}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:false,y:false},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(sheet,frameTime,sequence,stop){this.sheet=sheet;this.pivot={x:sheet.width/2,y:sheet.height/2};this.timer=new ig.Timer();this.frameTime=frameTime;this.sequence=sequence;this.stop=!!stop;this.tile=this.sequence[0];},rewind:function(){this.timer.set();this.loopCount=0;this.tile=this.sequence[0];return this;},gotoFrame:function(f){this.timer.set(this.frameTime*-f);this.update();},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var frameTotal=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(frameTotal/this.sequence.length);if(this.stop&&this.loopCount>0){this.frame=this.sequence.length-1;}
else{this.frame=frameTotal%this.sequence.length;}
this.tile=this.sequence[this.frame];},draw:function(targetX,targetY){var bbsize=Math.max(this.sheet.width,this.sheet.height);if(targetX>ig.system.width||targetY>ig.system.height||targetX+bbsize<0||targetY+bbsize<0){return;}
if(this.alpha!=1){ig.system.context.globalAlpha=this.alpha;}
if(this.angle==0){this.sheet.image.drawTile(targetX,targetY,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);}
else{ig.system.context.save();ig.system.context.translate(ig.system.getDrawPos(targetX+this.pivot.x),ig.system.getDrawPos(targetY+this.pivot.y));ig.system.context.rotate(this.angle);this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y);ig.system.context.restore();}
if(this.alpha!=1){ig.system.context.globalAlpha=1;}}});});

// lib/impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.animation','impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:false,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:false,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(x,y,settings){this.id=++ig.Entity._lastId;this.pos.x=x;this.pos.y=y;ig.merge(this,settings);},addAnim:function(name,frameTime,sequence,stop){if(!this.animSheet){throw('No animSheet to add the animation '+name+' to.');}
var a=new ig.Animation(this.animSheet,frameTime,sequence,stop);this.anims[name]=a;if(!this.currentAnim){this.currentAnim=a;}
return a;},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;var res=ig.game.collisionMap.trace(this.pos.x,this.pos.y,mx,my,this.size.x,this.size.y);this.handleMovementTrace(res);if(this.currentAnim){this.currentAnim.update();}},getNewVelocity:function(vel,accel,friction,max){if(accel){return(vel+accel*ig.system.tick).limit(-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return vel.limit(-max,max);},handleMovementTrace:function(res){this.standing=false;if(res.collision.y){if(this.bounciness>0&&Math.abs(this.vel.y)>this.minBounceVelocity){this.vel.y*=-this.bounciness;}
else{if(this.vel.y>0){this.standing=true;}
this.vel.y=0;}}
if(res.collision.x){if(this.bounciness>0&&Math.abs(this.vel.x)>this.minBounceVelocity){this.vel.x*=-this.bounciness;}
else{this.vel.x=0;}}
if(res.collision.slope){var s=res.collision.slope;if(this.bounciness>0){var proj=this.vel.x*s.nx+this.vel.y*s.ny;this.vel.x=(this.vel.x-s.nx*proj*2)*this.bounciness;this.vel.y=(this.vel.y-s.ny*proj*2)*this.bounciness;}
else{var lengthSquared=s.x*s.x+s.y*s.y;var dot=(this.vel.x*s.x+this.vel.y*s.y)/lengthSquared;this.vel.x=s.x*dot;this.vel.y=s.y*dot;var angle=Math.atan2(s.x,s.y);if(angle>this.slopeStanding.min&&angle<this.slopeStanding.max){this.standing=true;}}}
this.pos=res.pos;},draw:function(){if(this.currentAnim){this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y);}},kill:function(){ig.game.removeEntity(this);},receiveDamage:function(amount,from){this.health-=amount;if(this.health<=0){this.kill();}},touches:function(other){return!(this.pos.x>=other.pos.x+other.size.x||this.pos.x+this.size.x<=other.pos.x||this.pos.y>=other.pos.y+other.size.y||this.pos.y+this.size.y<=other.pos.y);},distanceTo:function(other){var xd=(this.pos.x+this.size.x/2)-(other.pos.x+other.size.x/2);var yd=(this.pos.y+this.size.y/2)-(other.pos.y+other.size.y/2);return Math.sqrt(xd*xd+yd*yd);},angleTo:function(other){return Math.atan2((other.pos.y+other.size.y/2)-(this.pos.y+this.size.y/2),(other.pos.x+other.size.x/2)-(this.pos.x+this.size.x/2));},check:function(other){},collideWith:function(other,axis){},ready:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){if(a.checkAgainst&b.type){a.check(b);}
if(b.checkAgainst&a.type){b.check(a);}
if(a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE){ig.Entity.solveCollision(a,b);}};ig.Entity.solveCollision=function(a,b){var weak=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED){weak=a;}
else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED){weak=b;}
if(a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x){if(a.last.y<b.last.y){ig.Entity.seperateOnYAxis(a,b,weak);}
else{ig.Entity.seperateOnYAxis(b,a,weak);}
a.collideWith(b,'y');b.collideWith(a,'y');}
else if(a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y){if(a.last.x<b.last.x){ig.Entity.seperateOnXAxis(a,b,weak);}
else{ig.Entity.seperateOnXAxis(b,a,weak);}
a.collideWith(b,'x');b.collideWith(a,'x');}};ig.Entity.seperateOnXAxis=function(left,right,weak){var nudge=(left.pos.x+left.size.x-right.pos.x);if(weak){var strong=left===weak?right:left;weak.vel.x=-weak.vel.x*weak.bounciness+strong.vel.x;var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,weak==left?-nudge:nudge,0,weak.size.x,weak.size.y);weak.pos.x=resWeak.pos.x;}
else{var v2=(left.vel.x-right.vel.x)/2;left.vel.x=-v2;right.vel.x=v2;var resLeft=ig.game.collisionMap.trace(left.pos.x,left.pos.y,-nudge/2,0,left.size.x,left.size.y);left.pos.x=Math.floor(resLeft.pos.x);var resRight=ig.game.collisionMap.trace(right.pos.x,right.pos.y,nudge/2,0,right.size.x,right.size.y);right.pos.x=Math.ceil(resRight.pos.x);}};ig.Entity.seperateOnYAxis=function(top,bottom,weak){var nudge=(top.pos.y+top.size.y-bottom.pos.y);if(weak){var strong=top===weak?bottom:top;weak.vel.y=-weak.vel.y*weak.bounciness+strong.vel.y;var nudgeX=0;if(weak==top&&Math.abs(weak.vel.y-strong.vel.y)<weak.minBounceVelocity){weak.standing=true;nudgeX=strong.vel.x*ig.system.tick;}
var resWeak=ig.game.collisionMap.trace(weak.pos.x,weak.pos.y,nudgeX,weak==top?-nudge:nudge,weak.size.x,weak.size.y);weak.pos.y=resWeak.pos.y;weak.pos.x=resWeak.pos.x;}
else if(ig.game.gravity&&(bottom.standing||top.vel.y>0)){var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,0,-(top.pos.y+top.size.y-bottom.pos.y),top.size.x,top.size.y);top.pos.y=resTop.pos.y;if(top.bounciness>0&&top.vel.y>top.minBounceVelocity){top.vel.y*=-top.bounciness;}
else{top.standing=true;top.vel.y=0;}}
else{var v2=(top.vel.y-bottom.vel.y)/2;top.vel.y=-v2;bottom.vel.y=v2;var nudgeX=bottom.vel.x*ig.system.tick;var resTop=ig.game.collisionMap.trace(top.pos.x,top.pos.y,nudgeX,-nudge/2,top.size.x,top.size.y);top.pos.y=resTop.pos.y;var resBottom=ig.game.collisionMap.trace(bottom.pos.x,bottom.pos.y,0,nudge/2,bottom.size.x,bottom.size.y);bottom.pos.y=resBottom.pos.y;}};});

// lib/impact/map.js
ig.baked=true;ig.module('impact.map').defines(function(){"use strict";ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(tilesize,data){this.tilesize=tilesize;this.data=data;this.height=data.length;this.width=data[0].length;},getTile:function(x,y){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){return this.data[ty][tx];}
else{return 0;}},setTile:function(x,y,tile){var tx=Math.floor(x/this.tilesize);var ty=Math.floor(y/this.tilesize);if((tx>=0&&tx<this.width)&&(ty>=0&&ty<this.height)){this.data[ty][tx]=tile;}}});});

// lib/impact/collision-map.js
ig.baked=true;ig.module('impact.collision-map').requires('impact.map').defines(function(){"use strict";ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(tilesize,data,tiledef){this.parent(tilesize,data);this.tiledef=tiledef||ig.CollisionMap.defaultTileDef;for(var t in this.tiledef){if(t|0>this.lastSlope){this.lastSlope=t|0;}}},trace:function(x,y,vx,vy,objectWidth,objectHeight){var res={collision:{x:false,y:false,slope:false},pos:{x:x,y:y},tile:{x:0,y:0}};var steps=Math.ceil(Math.max(Math.abs(vx),Math.abs(vy))/this.tilesize);if(steps>1){var sx=vx/steps;var sy=vy/steps;for(var i=0;i<steps&&(sx||sy);i++){this._traceStep(res,x,y,sx,sy,objectWidth,objectHeight,vx,vy,i);x=res.pos.x;y=res.pos.y;if(res.collision.x){sx=0;vx=0;}
if(res.collision.y){sy=0;vy=0;}
if(res.collision.slope){break;}}}
else{this._traceStep(res,x,y,vx,vy,objectWidth,objectHeight,vx,vy,0);}
return res;},_traceStep:function(res,x,y,vx,vy,width,height,rvx,rvy,step){res.pos.x+=vx;res.pos.y+=vy;var t=0;if(vx){var pxOffsetX=(vx>0?width:0);var tileOffsetX=(vx<0?this.tilesize:0);var firstTileY=Math.max(Math.floor(y/this.tilesize),0);var lastTileY=Math.min(Math.ceil((y+height)/this.tilesize),this.height);var tileX=Math.floor((res.pos.x+pxOffsetX)/this.tilesize);var prevTileX=Math.floor((x+pxOffsetX)/this.tilesize);if(step>0||tileX==prevTileX||prevTileX<0||prevTileX>=this.width){prevTileX=-1;}
if(tileX>=0&&tileX<this.width){for(var tileY=firstTileY;tileY<lastTileY;tileY++){if(prevTileX!=-1){t=this.data[tileY][prevTileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,prevTileX,tileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.x=true;res.tile.x=t;x=res.pos.x=tileX*this.tilesize-pxOffsetX+tileOffsetX;rvx=0;break;}}}}
if(vy){var pxOffsetY=(vy>0?height:0);var tileOffsetY=(vy<0?this.tilesize:0);var firstTileX=Math.max(Math.floor(res.pos.x/this.tilesize),0);var lastTileX=Math.min(Math.ceil((res.pos.x+width)/this.tilesize),this.width);var tileY=Math.floor((res.pos.y+pxOffsetY)/this.tilesize);var prevTileY=Math.floor((y+pxOffsetY)/this.tilesize);if(step>0||tileY==prevTileY||prevTileY<0||prevTileY>=this.height){prevTileY=-1;}
if(tileY>=0&&tileY<this.height){for(var tileX=firstTileX;tileX<lastTileX;tileX++){if(prevTileY!=-1){t=this.data[prevTileY][tileX];if(t>1&&t<=this.lastSlope&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,prevTileY)){break;}}
t=this.data[tileY][tileX];if(t==1||t>this.lastSlope||(t>1&&this._checkTileDef(res,t,x,y,rvx,rvy,width,height,tileX,tileY))){if(t>1&&t<=this.lastSlope&&res.collision.slope){break;}
res.collision.y=true;res.tile.y=t;res.pos.y=tileY*this.tilesize-pxOffsetY+tileOffsetY;break;}}}}},_checkTileDef:function(res,t,x,y,vx,vy,width,height,tileX,tileY){var def=this.tiledef[t];if(!def){return false;}
var lx=(tileX+def[0])*this.tilesize,ly=(tileY+def[1])*this.tilesize,lvx=(def[2]-def[0])*this.tilesize,lvy=(def[3]-def[1])*this.tilesize,solid=def[4];var tx=x+vx+(lvy<0?width:0)-lx,ty=y+vy+(lvx>0?height:0)-ly;if(lvx*ty-lvy*tx>0){if(vx*-lvy+vy*lvx<0){return solid;}
var length=Math.sqrt(lvx*lvx+lvy*lvy);var nx=lvy/length,ny=-lvx/length;var proj=tx*nx+ty*ny;var px=nx*proj,py=ny*proj;if(px*px+py*py>=vx*vx+vy*vy){return solid||(lvx*(ty-vy)-lvy*(tx-vx)<0.5);}
res.pos.x=x+vx-px;res.pos.y=y+vy-py;res.collision.slope={x:lvx,y:lvy,nx:nx,ny:ny};return true;}
return false;}});var H=1/2,N=1/3,M=2/3,SOLID=true,NON_SOLID=false;ig.CollisionMap.defaultTileDef={5:[0,1,1,M,SOLID],6:[0,M,1,N,SOLID],7:[0,N,1,0,SOLID],3:[0,1,1,H,SOLID],4:[0,H,1,0,SOLID],2:[0,1,1,0,SOLID],10:[H,1,1,0,SOLID],21:[0,1,H,0,SOLID],32:[M,1,1,0,SOLID],43:[N,1,M,0,SOLID],54:[0,1,N,0,SOLID],27:[0,0,1,N,SOLID],28:[0,N,1,M,SOLID],29:[0,M,1,1,SOLID],25:[0,0,1,H,SOLID],26:[0,H,1,1,SOLID],24:[0,0,1,1,SOLID],11:[0,0,H,1,SOLID],22:[H,0,1,1,SOLID],33:[0,0,N,1,SOLID],44:[N,0,M,1,SOLID],55:[M,0,1,1,SOLID],16:[1,N,0,0,SOLID],17:[1,M,0,N,SOLID],18:[1,1,0,M,SOLID],14:[1,H,0,0,SOLID],15:[1,1,0,H,SOLID],13:[1,1,0,0,SOLID],8:[H,1,0,0,SOLID],19:[1,1,H,0,SOLID],30:[N,1,0,0,SOLID],41:[M,1,N,0,SOLID],52:[1,1,M,0,SOLID],38:[1,M,0,1,SOLID],39:[1,N,0,M,SOLID],40:[1,0,0,N,SOLID],36:[1,H,0,1,SOLID],37:[1,0,0,H,SOLID],35:[1,0,0,1,SOLID],9:[1,0,H,1,SOLID],20:[H,0,0,1,SOLID],31:[1,0,M,1,SOLID],42:[M,0,N,1,SOLID],53:[N,0,0,1,SOLID],12:[0,0,1,0,NON_SOLID],23:[1,1,0,1,NON_SOLID],34:[1,0,1,1,NON_SOLID],45:[0,1,0,0,NON_SOLID]};ig.CollisionMap.staticNoCollision={trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};}};});

// lib/impact/background-map.js
ig.baked=true;ig.module('impact.background-map').requires('impact.map','impact.image').defines(function(){"use strict";ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:false,tilesetName:'',foreground:false,enabled:true,preRender:false,preRenderedChunks:null,chunkSize:512,debugChunks:false,anims:{},init:function(tilesize,data,tileset){this.parent(tilesize,data);this.setTileset(tileset);},setTileset:function(tileset){this.tilesetName=tileset instanceof ig.Image?tileset.path:tileset;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null;},setScreenPos:function(x,y){this.scroll.x=x/this.distance;this.scroll.y=y/this.distance;},preRenderMapToChunks:function(){var totalWidth=this.width*this.tilesize*ig.system.scale,totalHeight=this.height*this.tilesize*ig.system.scale;var chunkCols=Math.ceil(totalWidth/this.chunkSize),chunkRows=Math.ceil(totalHeight/this.chunkSize);this.preRenderedChunks=[];for(var y=0;y<chunkRows;y++){this.preRenderedChunks[y]=[];for(var x=0;x<chunkCols;x++){var chunkWidth=(x==chunkCols-1)?totalWidth-x*this.chunkSize:this.chunkSize;var chunkHeight=(y==chunkRows-1)?totalHeight-y*this.chunkSize:this.chunkSize;this.preRenderedChunks[y][x]=this.preRenderChunk(x,y,chunkWidth,chunkHeight);}}},preRenderChunk:function(cx,cy,w,h){var tw=w/this.tilesize/ig.system.scale+1,th=h/this.tilesize/ig.system.scale+1;var nx=(cx*this.chunkSize/ig.system.scale)%this.tilesize,ny=(cy*this.chunkSize/ig.system.scale)%this.tilesize;var tx=Math.floor(cx*this.chunkSize/this.tilesize/ig.system.scale),ty=Math.floor(cy*this.chunkSize/this.tilesize/ig.system.scale);var chunk=ig.$new('canvas');chunk.width=w;chunk.height=h;var oldContext=ig.system.context;ig.system.context=chunk.getContext("2d");for(var x=0;x<tw;x++){for(var y=0;y<th;y++){if(x+tx<this.width&&y+ty<this.height){var tile=this.data[y+ty][x+tx];if(tile){this.tiles.drawTile(x*this.tilesize-nx,y*this.tilesize-ny,tile-1,this.tilesize);}}}}
ig.system.context=oldContext;return chunk;},draw:function(){if(!this.tiles.loaded||!this.enabled){return;}
if(this.preRender){this.drawPreRendered();}
else{this.drawTiled();}},drawPreRendered:function(){if(!this.preRenderedChunks){this.preRenderMapToChunks();}
var dx=ig.system.getDrawPos(this.scroll.x),dy=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var w=this.width*this.tilesize*ig.system.scale;dx=(dx%w+w)%w;var h=this.height*this.tilesize*ig.system.scale;dy=(dy%h+h)%h;}
var minChunkX=Math.max(Math.floor(dx/this.chunkSize),0),minChunkY=Math.max(Math.floor(dy/this.chunkSize),0),maxChunkX=Math.ceil((dx+ig.system.realWidth)/this.chunkSize),maxChunkY=Math.ceil((dy+ig.system.realHeight)/this.chunkSize),maxRealChunkX=this.preRenderedChunks[0].length,maxRealChunkY=this.preRenderedChunks.length;if(!this.repeat){maxChunkX=Math.min(maxChunkX,maxRealChunkX);maxChunkY=Math.min(maxChunkY,maxRealChunkY);}
var nudgeY=0;for(var cy=minChunkY;cy<maxChunkY;cy++){var nudgeX=0;for(var cx=minChunkX;cx<maxChunkX;cx++){var chunk=this.preRenderedChunks[cy%maxRealChunkY][cx%maxRealChunkX];var x=-dx+cx*this.chunkSize-nudgeX;var y=-dy+cy*this.chunkSize-nudgeY;ig.system.context.drawImage(chunk,x,y);ig.Image.drawCount++;if(this.debugChunks){ig.system.context.strokeStyle='#f0f';ig.system.context.strokeRect(x,y,this.chunkSize,this.chunkSize);}
if(this.repeat&&chunk.width<this.chunkSize&&x+chunk.width<ig.system.realWidth){nudgeX=this.chunkSize-chunk.width;maxChunkX++;}}
if(this.repeat&&chunk.height<this.chunkSize&&y+chunk.height<ig.system.realHeight){nudgeY=this.chunkSize-chunk.height;maxChunkY++;}}},drawTiled:function(){var tile=0,anim=null,tileOffsetX=(this.scroll.x/this.tilesize).toInt(),tileOffsetY=(this.scroll.y/this.tilesize).toInt(),pxOffsetX=this.scroll.x%this.tilesize,pxOffsetY=this.scroll.y%this.tilesize,pxMinX=-pxOffsetX-this.tilesize,pxMinY=-pxOffsetY-this.tilesize,pxMaxX=ig.system.width+this.tilesize-pxOffsetX,pxMaxY=ig.system.height+this.tilesize-pxOffsetY;for(var mapY=-1,pxY=pxMinY;pxY<pxMaxY;mapY++,pxY+=this.tilesize){var tileY=mapY+tileOffsetY;if(tileY>=this.height||tileY<0){if(!this.repeat){continue;}
tileY=(tileY%this.height+this.height)%this.height;}
for(var mapX=-1,pxX=pxMinX;pxX<pxMaxX;mapX++,pxX+=this.tilesize){var tileX=mapX+tileOffsetX;if(tileX>=this.width||tileX<0){if(!this.repeat){continue;}
tileX=(tileX%this.width+this.width)%this.width;}
if((tile=this.data[tileY][tileX])){if((anim=this.anims[tile-1])){anim.draw(pxX,pxY);}
else{this.tiles.drawTile(pxX,pxY,tile-1,this.tilesize);}}}}}});});

// lib/impact/game.js
ig.baked=true;ig.module('impact.game').requires('impact.impact','impact.entity','impact.collision-map','impact.background-map').defines(function(){"use strict";ig.Game=ig.Class.extend({clearColor:'#000000',gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:false,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:false,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;ig.game=this;return null;},loadLevel:function(data){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var i=0;i<data.entities.length;i++){var ent=data.entities[i];this.spawnEntity(ent.type,ent.x,ent.y,ent.settings);}
this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(var i=0;i<data.layer.length;i++){var ld=data.layer[i];if(ld.name=='collision'){this.collisionMap=new ig.CollisionMap(ld.tilesize,ld.data);}
else{var newMap=new ig.BackgroundMap(ld.tilesize,ld.data,ld.tilesetName);newMap.anims=this.backgroundAnims[ld.tilesetName]||{};newMap.repeat=ld.repeat;newMap.distance=ld.distance;newMap.foreground=!!ld.foreground;newMap.preRender=!!ld.preRender;newMap.name=ld.name;this.backgroundMaps.push(newMap);}}
for(var i=0;i<this.entities.length;i++){this.entities[i].ready();}},loadLevelDeferred:function(data){this._levelToLoad=data;},getMapByName:function(name){if(name=='collision'){return this.collisionMap;}
for(var i=0;i<this.backgroundMaps.length;i++){if(this.backgroundMaps[i].name==name){return this.backgroundMaps[i];}}
return null;},getEntityByName:function(name){return this.namedEntities[name];},getEntitiesByType:function(type){var entityClass=typeof(type)==='string'?ig.global[type]:type;var a=[];for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(ent instanceof entityClass&&!ent._killed){a.push(ent);}}
return a;},getEntityById:function(id){var entityId=typeof(id)==='string'?parseInt(id):id;var ent;for(var i=0;i<this.entities.length;i++){ent=this.entities[i];if(ent.id===entityId&&!ent._killed){break;}}
return ent;},spawnEntity:function(type,x,y,settings){var entityClass=typeof(type)==='string'?ig.global[type]:type;if(!entityClass){throw("Can't spawn entity of type "+type);}
var ent=new(entityClass)(x,y,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
return ent;},sortEntities:function(){this.entities.sort(this.sortBy);},sortEntitiesDeferred:function(){this._doSortEntities=true;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},run:function(){this.update();this.draw();},update:function(){if(this._levelToLoad){this.loadLevel(this._levelToLoad);this._levelToLoad=null;}
if(this._doSortEntities||this.autoSort){this.sortEntities();this._doSortEntities=false;}
this.updateEntities();this.checkEntities();for(var i=0;i<this._deferredKill.length;i++){this.entities.erase(this._deferredKill[i]);}
this._deferredKill=[];for(var tileset in this.backgroundAnims){var anims=this.backgroundAnims[tileset];for(var a in anims){anims[a].update();}}},updateEntities:function(){for(var i=0;i<this.entities.length;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},draw:function(){if(this.clearColor){ig.system.clear(this.clearColor);}
this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var mapIndex;for(mapIndex=0;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];if(map.foreground){break;}
map.setScreenPos(this.screen.x,this.screen.y);map.draw();}
this.drawEntities();for(mapIndex;mapIndex<this.backgroundMaps.length;mapIndex++){var map=this.backgroundMaps[mapIndex];map.setScreenPos(this.screen.x,this.screen.y);map.draw();}},drawEntities:function(){for(var i=0;i<this.entities.length;i++){this.entities[i].draw();}},checkEntities:function(){var hash={};for(var e=0;e<this.entities.length;e++){var entity=this.entities[e];if(entity.type==ig.Entity.TYPE.NONE&&entity.checkAgainst==ig.Entity.TYPE.NONE&&entity.collides==ig.Entity.COLLIDES.NEVER){continue;}
var checked={},xmin=Math.floor(entity.pos.x/this.cellSize),ymin=Math.floor(entity.pos.y/this.cellSize),xmax=Math.floor((entity.pos.x+entity.size.x)/this.cellSize)+1,ymax=Math.floor((entity.pos.y+entity.size.y)/this.cellSize)+1;for(var x=xmin;x<xmax;x++){for(var y=ymin;y<ymax;y++){if(!hash[x]){hash[x]={};hash[x][y]=[entity];}
else if(!hash[x][y]){hash[x][y]=[entity];}
else{var cell=hash[x][y];for(var c=0;c<cell.length;c++){if(entity.touches(cell[c])&&!checked[cell[c].id]){checked[cell[c].id]=true;ig.Entity.checkPair(entity,cell[c]);}}
cell.push(entity);}}}}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex;},POS_X:function(a,b){return(a.pos.x+a.size.x)-(b.pos.x+b.size.x);},POS_Y:function(a,b){return(a.pos.y+a.size.y)-(b.pos.y+b.size.y);}};});

// lib/game/entities/unit.js
ig.baked=true;ig.module('game.entities.unit').requires('impact.entity').defines(function(){EntityUnit=ig.Entity.extend({size:{x:32,y:32},health:0,maxHealth:0,type:'',defense:0,damage:{min:0,max:0},movement:0,range:0,owner:0,turn:false,base:1,path:undefined,curIndex:0,cost:0,stackSize:0,moves:0,attacks:0,moveLimit:2,attackLimit:1,actionLimit:2,canMoveAndAttack:false,defCost:0.5,minDmgCost:2.7,maxDmgCost:2.5,atkRangeCost:1.4,animSheet:new ig.AnimationSheet('media/units.png',32,32),init:function(x,y,settings){this.parent(x,y,settings);this.ai=ig.game.ai;this.cost=Math.round(this.health+this.defense*this.defCost+
this.damage.min*this.minDmgCost+(this.damage.max-this.damage.min)*this.maxDmgCost+this.range*this.atkRangeCost+this.movement*3);if(!settings||!settings.ai){this.baseHealth=this.health;this.health=(this.health*this.stackSize)||this.health;this.maxHealth=this.health;}},update:function(){var tilesize=32;var col=Math.floor(ig.input.mouse.x/tilesize);var row=Math.floor(ig.input.mouse.y/tilesize);if(this.turn&&ig.game.mouseUp){var s=ig.system.scale;var unitCol=this.getCol();var unitRow=this.getRow();if(ig.game.board.gameBoard&&ig.game.board.gameBoard[row]){if(this.canMoveSquare({'row':row,'col':col})){$('canvas').removeClass('attacking');$('canvas').removeClass('healing');$('canvas').addClass('moving');if(ig.input.state('leftButton')){this.moveUnit(row,col);}}
else if(this.canAtkSquare({'row':row,'col':col})){$('canvas').removeClass('healing');$('canvas').removeClass('moving');$('canvas').addClass('attacking');if(ig.input.state('leftButton')){var enemy=this.attackUnit(row,col);if(enemy.health<=0){if(enemy.owner===ig.game.board.HUMAN)
ig.game.board.humanArmySize--;else
ig.game.board.computerArmySize--;var row=enemy.getRow();var col=enemy.getCol();delete ig.game.board.gameBoard[row][col];if(enemy.base===2){delete ig.game.board.gameBoard[row+1][col];}
else if(enemy.base===4){delete ig.game.board.gameBoard[row][col+1];delete ig.game.board.gameBoard[row+1][col];delete ig.game.board.gameBoard[row+1][col+1];}}}}
else if(this.name==="Medic"&&this.inMoveRange({'row':row,'col':col})&&ig.game.board.gameBoard[row][col]&&ig.game.board.gameBoard[row][col]!==-1&&ig.game.getEntityById(ig.game.board.gameBoard[row][col]).owner===this.owner&&ig.game.getEntityById(ig.game.board.gameBoard[row][col]).type==="Biological"&&ig.game.getEntityById(ig.game.board.gameBoard[row][col]).health<ig.game.getEntityById(ig.game.board.gameBoard[row][col]).maxHealth){var ent=ig.game.getEntityById(ig.game.board.gameBoard[row][col]);$('canvas').removeClass('attacking');$('canvas').removeClass('moving');$('canvas').addClass('healing');if(ig.input.state('leftButton')){this.turn=false;ent.health+=Math.min(this.healAmount,ent.maxHealth-ent.health);this.attacks++;}}
else{$('canvas').removeClass('attacking');$('canvas').removeClass('healing');$('canvas').removeClass('moving');}
if(ig.input.state('leftButton')&&(!ig.game.board.gameBoard[row][col]||ig.game.board.gameBoard[row][col]===-1)){if(!jQuery.isEmptyObject(ig.game.selectedUnit)){ig.game.selectedUnit.turn=false;}}
if(ig.game.board.gameBoard[row][col]&&ig.game.board.gameBoard[row][col]!==-1){if(ig.game.hoverTimer>=ig.game.hoverDelay){var ent=ig.game.getEntityById(ig.game.board.gameBoard[row][col]);ig.game.showUnitStats(ent);}
ig.game.hoverTimer=(ig.game.hoverTimer>ig.game.hoverDelay*2?ig.game.hoverDelay*2:ig.game.hoverTimer+1);}
else{$('#unit-panel').hide();ig.game.hoverTimer=0;}}}
else if(!this.turn&&ig.game.board.playerTurn===this.owner&&ig.input.state('leftButton')&&ig.game.board.gameBoard[row][col]===this.id){if(!jQuery.isEmptyObject(ig.game.selectedUnit)){ig.game.selectedUnit.turn=false;}
this.turn=true;ig.game.selectedUnit=this;}
this.parent();},draw:function(){var ctx=ig.system.context;if(ig.game.backgroundMaps){var tilesize=32;var width=ig.game.backgroundMaps[0].width;var height=ig.game.backgroundMaps[0].height;var col=this.getCol();var row=this.getRow();ctx.save();if(this.turn){ctx.save();ctx.translate(0.5,0.5);if(this.canAttack()){ctx.fillStyle='rgba(255, 0, 0, .4)';ctx.strokeStyle='rgb(255, 0, 0)';for(var r=this.pos.y/tilesize-this.range,endRow=this.pos.y/tilesize+this.range;r<=endRow;r++){for(var c=this.pos.x/tilesize-this.range,endCol=this.pos.x/tilesize+this.range;c<=endCol;c++){if(r>=0&&r<height&&c>=0&&c<width&&this.inAtkRange({'row':r,'col':c})){ctx.fillRect(c*tilesize,r*tilesize,tilesize,tilesize);ctx.strokeRect(c*tilesize,r*tilesize,tilesize,tilesize);}}}}
if(this.canMove()){ctx.fillStyle='rgba(0, 255, 0, .2)';ctx.strokeStyle='rgb(0, 255, 0)';for(var r=this.pos.y/tilesize-this.movement,endRow=this.pos.y/tilesize+this.movement;r<=endRow;r++){for(var c=this.pos.x/tilesize-this.movement,endCol=this.pos.x/tilesize+this.movement;c<=endCol;c++){if(r>=0&&r<height&&c>=0&&c<width&&this.canMoveSquare({'row':r,'col':c})){ctx.fillRect(c*tilesize,r*tilesize,tilesize,tilesize);ctx.strokeRect(c*tilesize,r*tilesize,tilesize,tilesize);}}}}
ctx.restore();ctx.strokeStyle="#FFFFFF";if(this.base===2){ctx.strokeRect(col*tilesize+.5,row*tilesize+.5,tilesize,tilesize*2);}
else if(this.base===4){ctx.strokeRect(col*tilesize+.5,row*tilesize+.5,tilesize*2,tilesize*2);}
else{ctx.strokeRect(col*tilesize+.5,row*tilesize+.5,tilesize,tilesize);}
var hoverCol=Math.floor(ig.input.mouse.x/tilesize);var hoverRow=Math.floor(ig.input.mouse.y/tilesize);if(this.canAtkSquare({'row':hoverRow,'col':hoverCol})){ctx.strokeStyle="rgb(255, 0, 0)";ctx.beginPath();ctx.moveTo((col+.5)*tilesize+.5,(row+.5)*tilesize+.5);ctx.lineTo((hoverCol+.5)*tilesize+.5,(hoverRow+.5)*tilesize+.5);ctx.stroke();}
else if(this.canMoveSquare({'row':hoverRow,'col':hoverCol})){ctx.strokeStyle="rgb(0, 255, 0)";ctx.beginPath();ctx.moveTo((col+.5)*tilesize+.5,(row+.5)*tilesize+.5);ctx.lineTo((hoverCol+.5)*tilesize+.5,(hoverRow+.5)*tilesize+.5);ctx.stroke();ctx.fillStyle="rgba(0, 0, 0, .4)";if(this.base===2){ctx.fillRect(hoverCol*tilesize+.5,hoverRow*tilesize+.5,tilesize,tilesize*2);}
else if(this.base===4){ctx.fillRect(hoverCol*tilesize+.5,hoverRow*tilesize+.5,tilesize*2,tilesize*2);}
else{ctx.fillRect(hoverCol*tilesize+.5,hoverRow*tilesize+.5,tilesize,tilesize);}}}
if(this.path){if(this.path instanceof Array&&this.path[this.curIndex]){this.turn=false;var connection=this.path[this.curIndex];var signX=(connection.toNode.col-connection.fromNode.col)>0?1:(connection.toNode.col-connection.fromNode.col)<0?-1:0;var signY=(connection.toNode.row-connection.fromNode.row)>0?1:(connection.toNode.row-connection.fromNode.row)<0?-1:0;this.pos.x+=signX*2;this.pos.y+=signY*2;this.parent();var row=Math.floor(this.pos.y/tilesize);var col=Math.floor(this.pos.x/tilesize);var stop=false;if(((signX>=0&&col===connection.toNode.col)||(signX<0&&col===connection.toNode.col-1))&&((signY>=0&&row===connection.toNode.row)||(signY<0&&row===connection.toNode.row-1))){this.pos.x=connection.toNode.col*tilesize;this.pos.y=connection.toNode.row*tilesize;if(this.curIndex<this.path.length-1){this.curIndex++;}
else{this.path=undefined;this.curIndex=0;$('#pathfinding').hide();var context=document.getElementById('pathfinding').getContext('2d');context.clearRect(0,0,1024,576);ig.game.nextTurn();}}}
else{this.path=undefined;this.curIndex=0;this.turn=true;}}
else{var barWidth=tilesize-10;var barHeight=7;ctx.fillStyle='#000000';if(this.base===2){ctx.fillRect(col*tilesize+5.5,row*tilesize-Math.floor(barHeight/2)+.5,barWidth,barHeight);ctx.fillStyle='rgb(0, 255, 0)';ctx.fillRect(col*tilesize+6,row*tilesize-Math.floor(barHeight/2)+1,(this.health/this.maxHealth)*(barWidth-2),barHeight-2);}
else if(this.base===4){ctx.fillRect(col*tilesize+(tilesize/2)+5.5,row*tilesize-Math.floor(barHeight/2)+.5,barWidth,barHeight);ctx.fillStyle='rgb(0, 255, 0)';ctx.fillRect(col*tilesize+(tilesize/2)+6,row*tilesize-Math.floor(barHeight/2)+1,(this.health/this.maxHealth)*(barWidth-2),barHeight-2);}
else{ctx.fillRect(col*tilesize+5.5,row*tilesize-Math.floor(barHeight/2)+.5,barWidth,barHeight);ctx.fillStyle='rgb(0, 255, 0)';ctx.fillRect(col*tilesize+6,row*tilesize-Math.floor(barHeight/2)+1,(this.health/this.maxHealth)*(barWidth-2),barHeight-2);}}
if(this.attackedUnit&&ig.game.board.playerTurn===ig.game.board.COMPUTER&&this.owner===ig.game.board.COMPUTER){if(this.curIndex>0){ctx.strokeStyle="rgb(255, 0, 0)";ctx.beginPath();ctx.moveTo((col+.5)*tilesize+.5,(row+.5)*tilesize+.5);ctx.lineTo(this.attackedUnit.pos.x+(.5*tilesize)+.5,this.attackedUnit.pos.y+(.5*tilesize))+.5;ctx.stroke();this.curIndex--;}
else{this.attackedUnit=undefined;this.curIndex=0;ig.game.nextTurn();}}
ctx.restore();}
this.parent();if(!this.path){ctx.font=(tilesize/3)+"px Arial";ctx.fontWidth=tilesize/4;ctx.strokeStyle='#FFFFFF';ctx.fillStyle='#333';ctx.textAlign='center';if(this.base===2){ctx.fillRect((col+.15)*tilesize,(row+1.9)*tilesize,.7*tilesize,.4*tilesize);ctx.strokeRect((col+.15)*tilesize,(row+1.9)*tilesize,.7*tilesize,.4*tilesize);ctx.fillStyle='#FFFFFF';ctx.fillText(this.stackSize,(col+.5)*tilesize,(row+2.2)*tilesize);}
else if(this.base===4){ctx.fillRect((col+.65)*tilesize,(row+1.9)*tilesize,.7*tilesize,.4*tilesize);ctx.strokeRect((col+.65)*tilesize,(row+1.9)*tilesize,.7*tilesize,.4*tilesize);ctx.fillStyle='#FFFFFF';ctx.fillText(this.stackSize,(col+1)*tilesize,(row+2.2)*tilesize);}
else{ctx.fillRect((col+.15)*tilesize,(row+.9)*tilesize,.7*tilesize,.4*tilesize);ctx.strokeRect((col+.15)*tilesize,(row+.9)*tilesize,.7*tilesize,.4*tilesize);ctx.fillStyle='#FFFFFF';ctx.fillText(this.stackSize,(col+.5)*tilesize,(row+1.2)*tilesize);}}},getAdditionalCheck:function(row,col){var additionalCheck;if(this.base===2){additionalCheck=(!ig.game.board.gameBoard[row+1][col]||ig.game.board.gameBoard[row+1][col]===this.id);}
else if(this.base===4){additionalCheck=((!ig.game.board.gameBoard[row][col+1]||ig.game.board.gameBoard[row][col+1]===this.id)&&(!ig.game.board.gameBoard[row+1][col]||ig.game.board.gameBoard[row+1][col]===this.id)&&(!ig.game.board.gameBoard[row+1][col+1]||ig.game.board.gameBoard[row+1][col+1]===this.id));}
else{additionalCheck=true;}
return additionalCheck;},rand:function(low,high){return Math.floor(Math.random()*(high-low+1)+low);},getRow:function(){var s=ig.system.scale;var tilesize=32;var y=this.pos.y*s-ig.game.screen.y*s;return Math.floor(y/tilesize);},getCol:function(){var s=ig.system.scale;var tilesize=32;var x=this.pos.x*s-ig.game.screen.x*s;return Math.floor(x/tilesize);},getRange:function(target){return(Math.abs(this.getCol()-target.col)+Math.abs(this.getRow()-target.row));},inAtkRange:function(target,rnge){var range=(typeof rnge!=='undefined'?rnge:this.getRange(target))
return range<=this.range;},inMoveRange:function(target){return this.getRange(target)<=this.movement;},canAtkSquare:function(target){return this.inAtkRange(target)&&ig.game.board.gameBoard[target.row][target.col]&&ig.game.board.gameBoard[target.row][target.col]!==-1&&ig.game.getEntityById(ig.game.board.gameBoard[target.row][target.col]).owner!==this.owner&&this.canAttack();},canMoveSquare:function(target){return this.inMoveRange(target)&&!ig.game.board.gameBoard[target.row][target.col]&&this.getAdditionalCheck(target.row,target.col)&&this.canMove();},canAttack:function(){return this.moves+this.attacks<this.actionLimit&&this.attacks<this.attackLimit&&(!this.canMoveAndAttack?this.moves===0:true);},canMove:function(){return this.moves+this.attacks<this.actionLimit&&this.moves<this.moveLimit&&this.attacks===0;},resetActions:function(){this.moves=0;this.attacks=0;},moveUnit:function(row,col){var unitRow=this.getRow();var unitCol=this.getCol();delete ig.game.board.gameBoard[unitRow][unitCol];if(this.base===2){delete ig.game.board.gameBoard[unitRow+1][unitCol];}
else if(this.base===4){delete ig.game.board.gameBoard[unitRow][unitCol+1];delete ig.game.board.gameBoard[unitRow+1][unitCol];delete ig.game.board.gameBoard[unitRow+1][unitCol+1];}
var startNode=this.ai.nodes[unitRow][unitCol];var endNode=this.ai.nodes[row][col];var hueristic=new this.ai.Heuristic(endNode);$('#pathfinding').show();console.time('A* Pathfinding Algorithm');this.path=this.ai.findPath(startNode,endNode,hueristic);console.timeEnd('A* Pathfinding Algorithm');console.log("");this.curIndex=0;ig.game.board.gameBoard[row][col]=this.id;if(this.base===2){ig.game.board.gameBoard[row+1][col]=this.id;}
else if(this.base===4){ig.game.board.gameBoard[row][col+1]=this.id;ig.game.board.gameBoard[row+1][col]=this.id;ig.game.board.gameBoard[row+1][col+1]=this.id;}
this.moves++;},attackUnit:function(row,col){this.turn=false;var ent=ig.game.getEntityById(ig.game.board.gameBoard[row][col]);var dmg=this.rand(this.damage.min*this.stackSize,this.damage.max*this.stackSize);dmg-=(ent.defense/2);var minDmg=Math.ceil(this.damage.min*.3)
dmg=dmg<minDmg?minDmg:dmg;console.log("Attacks for "+dmg+" damage");this.attackedUnit=ent;this.curIndex=40;ent.receiveDamage(dmg,this);if(ent.health/(ent.stackSize-1)<ent.baseHealth){ent.stackSize=Math.ceil(ent.health/ent.baseHealth);}
this.attacks++;return ent;}});});

// lib/game/entities/marine.js
ig.baked=true;ig.module('game.entities.marine').requires('game.entities.unit').defines(function(){EntityMarine=EntityUnit.extend({name:"Marine",className:"EntityMarine",type:"Biological",health:20,maxHealth:20,defense:3,damage:{min:6,max:7},movement:7,range:7,canMoveAndAttack:true,init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[1]);}
else if(this.owner===1){this.addAnim('idle',1,[2]);}
else{this.addAnim('idle',1,[0]);}},});});

// lib/game/entities/shotgun.js
ig.baked=true;ig.module('game.entities.shotgun').requires('game.entities.unit').defines(function(){EntityShotgun=EntityUnit.extend({name:"Shotgun Trooper",className:"EntityShotgun",type:"Biological",health:25,maxHealth:25,defense:4,damage:{min:8,max:13},movement:8,range:2,canMoveAndAttack:true,init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[4]);}
else if(this.owner===1){this.addAnim('idle',1,[5]);}
else{this.addAnim('idle',1,[3]);}},});});

// lib/game/entities/sniper.js
ig.baked=true;ig.module('game.entities.sniper').requires('game.entities.unit').defines(function(){EntitySniper=EntityUnit.extend({name:"Sniper",className:"EntitySniper",type:"Biological",health:10,maxHealth:10,defense:2,damage:{min:10,max:15},movement:6,range:11,init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[7]);}
else if(this.owner===1){this.addAnim('idle',1,[8]);}
else{this.addAnim('idle',1,[6]);}},inAtkRange:function(target,rnge){var range=(typeof rnge!=='undefined'?rnge:this.getRange(target))
return range<=this.range&&range>2;}});});

// lib/game/entities/medic.js
ig.baked=true;ig.module('game.entities.medic').requires('game.entities.unit').defines(function(){EntityMedic=EntityUnit.extend({name:"Medic",className:"EntityMedic",type:"Biological",health:20,maxHealth:20,defense:3,damage:{min:3,max:4},movement:7,range:3,healAmount:5,canMoveAndAttack:true,init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[10]);}
else if(this.owner===1){this.addAnim('idle',1,[11]);}
else{this.addAnim('idle',1,[9]);}},});});

// lib/game/entities/mech.js
ig.baked=true;ig.module('game.entities.mech').requires('game.entities.unit').defines(function(){EntityMech=EntityUnit.extend({size:{x:32,y:64},name:"Mech Unit",className:"EntityMech",type:"Mechanical",health:30,maxHealth:30,defense:5,damage:{min:9,max:12},movement:5,range:5,base:2,canMoveAndAttack:true,animSheet:new ig.AnimationSheet('media/units-large.png',64,64),init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[0]);}
else if(this.owner===1){this.addAnim('idle',1,[1]);}},});});

// lib/game/entities/tank.js
ig.baked=true;ig.module('game.entities.tank').requires('game.entities.unit').defines(function(){EntityTank=EntityUnit.extend({size:{x:64,y:64},name:"Tank",className:"EntityTank",type:"Mechanical",health:40,maxHealth:40,defense:6,damage:{min:22,max:25},movement:9,range:9,base:4,canMoveAndAttack:true,animSheet:new ig.AnimationSheet('media/units-large.png',64,64),init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[2]);}
else if(this.owner===1){this.addAnim('idle',1,[3]);}},inAtkRange:function(target,rnge){var range=(typeof rnge!=='undefined'?rnge:this.getRange(target))
return range<=this.range&&range>3;}});});

// lib/game/entities/corvette.js
ig.baked=true;ig.module('game.entities.corvette').requires('game.entities.unit').defines(function(){EntityCorvette=EntityUnit.extend({size:{x:64,y:64},name:"Corvette",className:"EntityCorvette",type:"Mechanical",health:35,maxHealth:35,defense:5,damage:{min:15,max:17},movement:10,range:6,base:4,MoveAndAttack:true,animSheet:new ig.AnimationSheet('media/units-large.png',64,64),init:function(x,y,settings){this.parent(x,y,settings);if(this.owner===-1){this.addAnim('idle',1,[4]);}
else if(this.owner===1){this.addAnim('idle',1,[5]);}},inMoveRange:function(target){var range=this.getRange(target);return range<=this.movement&&range>4;}});});

// lib/game/entities/ai.js
ig.baked=true;ig.module('game.entities.ai').defines(function(){AI=ig.Class.extend({data:[],nodes:[],connections:[],output:'',Move:function(unitId,moveType,row,col){this.unitId=unitId;this.type=moveType;this.row=row||0;this.col=col||0;},Board:function(){this.HUMAN=-1;this.COMPUTER=1;this.playerTurn=-1;this.winningPlayer=0;this.gameBoard=[];this.move={};this.humanArmySize=0;this.computerArmySize=0;this.units=[];var height=ig.game.backgroundMaps[0].height;for(var r=0;r<height+1;r++){this.gameBoard[r]=[];}
this.init=function(){for(var i=0;i<ig.game.entities.length;i++){var ent=ig.game.entities[i];if(ent.owner===this.HUMAN)
this.humanArmySize++;else
this.computerArmySize++;}};this.getMoves=function(){var moves=[];var endMoves=[];var rangeMoves=[];var attackStrength=[];var safestMoves=[];var enemyEnts=[];var currentEnts=[];var tilesize=ig.game.backgroundMaps[0].tilesize;var width=ig.game.backgroundMaps[0].width;var height=ig.game.backgroundMaps[0].height;var i,j,r,c,unit,currentUnit,enemyUnit,dist,minDist,minUnit,diffRow,diffCol,currRow,currCol,eR,eC,enemyRow,enemyCol,signR,signC,startRow,startCol,endRow,endCol,halfMove,move,index,diff,k,range,canAttak;for(i=0;i<this.units.length;i++){unit=this.units[i];if(!unit._killed&&unit.owner===this.playerTurn)
currentEnts.push(unit);else if(!unit._killed)
enemyEnts.push(unit);}
for(i=0;i<=enemyEnts.length;i++){attackStrength[i]=[];}
for(i=0;i<currentEnts.length;i++){currentUnit=currentEnts[i];currRow=currentUnit.getRow();currCol=currentUnit.getCol();move=currentUnit.movement;halfMove=Math.ceil(move/2);if(!currentUnit.canAttack()&&!currentUnit.canMove())
continue;minDist=Infinity;for(j=0;j<enemyEnts.length;j++){enemyUnit=enemyEnts[j];eR=enemyUnit.getRow();eC=enemyUnit.getCol();r=Math.abs(eR-currRow);c=Math.abs(eC-currCol);dist=Math.sqrt(r*r+c*c);if(dist<minDist){minDist=dist;minUnit=enemyUnit;diffRow=eR-currRow;diffCol=eC-currCol;enemyRow=eR;enemyCol=eC;}
range=Math.abs(currCol-eC)+Math.abs(currRow-eR);if(currentUnit.inAtkRange({},range)){rangeMoves.push(new ig.game.ai.Move(currentUnit.id,'Attack',eR,eC));}}
signR=this.sign(diffRow);signC=this.sign(diffCol);if(diffRow===0){startRow=currRow-halfMove;endRow=currRow+halfMove;startCol=currCol+(halfMove*signC);endCol=currCol+(move*signC);index=0;for(r=startRow;r!==endRow;r+=1){diff=index*signC;for(c=startCol-diff;c!==endCol;c+=signC){if(r>=0&&r<height&&c>=0&&c<width&&this.canMoveSquare(currentUnit,{'row':r,'col':c})){moves.push(new ig.game.ai.Move(currentUnit.id,'Move',r,c));}}
if(moves.length>0)
endMoves.push(moves[moves.length-1]);index+=(index<halfMove?1:-1);}}
else if(diffCol===0){startCol=currCol-halfMove;endCol=currCol+halfMove;startRow=currRow+(halfMove*signR);endRow=currRow+(move*signR);index=0;for(c=startCol;c!==endCol;c+=1){diff=index*signR;for(r=startRow-diff;r!==endRow;r+=signR){if(r>=0&&r<height&&c>=0&&c<width&&this.canMoveSquare(currentUnit,{'row':r,'col':c})){moves.push(new ig.game.ai.Move(currentUnit.id,'Move',r,c));}}
if(moves.length>0)
endMoves.push(moves[moves.length-1]);index+=(index<halfMove?1:-1);}}
else{startRow=currRow;startCol=currCol;endRow=currRow+(move*signR);endCol=currCol+(move*signC);for(r=startRow;r!==endRow;r+=signR){for(c=startCol;c!==endCol;c+=signC){if(r>=0&&r<height&&c>=0&&c<width&&this.canMoveSquare(currentUnit,{'row':r,'col':c})){moves.push(new ig.game.ai.Move(currentUnit.id,'Move',r,c));}}
if(moves.length>0)
endMoves.push(moves[moves.length-1]);}}
for(k=0;k<moves.length;k++){range=Math.abs(moves[k].col-enemyCol)+Math.abs(moves[k].row-enemyRow);if(currentUnit.inAtkRange({},range)){rangeMoves.push(moves[k]);}}
if(rangeMoves.length===0){rangeMoves=moves;}
rangeMoves.push(new ig.game.ai.Move(currentUnit.id,'Safe',currRow,currCol));for(k=0;k<rangeMoves.length;k++){index=0;for(i=0;i<enemyEnts.length;i++){enemyUnit=enemyEnts[i];eR=enemyUnit.getRow();eC=enemyUnit.getCol();range=Math.abs(rangeMoves[k].col-eC)+Math.abs(rangeMoves[k].row-eR);if(enemyUnit.inAtkRange({},range)){index++;}}
attackStrength[index].push(rangeMoves[k]);}
for(k=0;k<attackStrength.length;k++){if(attackStrength[k].length>0){if(attackStrength[k].length===1&&attackStrength[k][0].type==='Safe'){continue;}
safestMoves=attackStrength[k];break;}}
canAttak=this.canAtkSquare(currentUnit,{row:enemyRow,col:enemyCol});if(safestMoves.length===0&&canAttak){return[new ig.game.ai.Move(currentUnit.id,'Attack',enemyRow,enemyCol)]}
for(k=0;k<safestMoves.length;k++){if(safestMoves[k].type==='Safe'&&canAttak){return[new ig.game.ai.Move(currentUnit.id,'Attack',enemyRow,enemyCol)];}}
if(canAttak){return[new ig.game.ai.Move(currentUnit.id,'Attack',enemyRow,enemyCol)];}
if(safestMoves.length===moves.length){return endMoves;}
for(k=0;k<safestMoves.length;k++){if(safestMoves[k].type==='Safe'){safestMoves.splice(k,1);}}
return safestMoves;}
return[new ig.game.ai.Move(undefined,'End Turn',undefined,undefined)];};this.makeMove=function(move){var newBoard=new ig.game.ai.Board();newBoard.init();newBoard.playerTurn=this.playerTurn;for(var r=0,len=this.gameBoard.length;r<len;r++){for(var c=0,leng=this.gameBoard[r].length;c<leng;c++){newBoard.gameBoard[r][c]=this.gameBoard[r][c];}}
for(var i=0;i<this.units.length;i++){var ent=this.units[i];var type=ent.className;var entityClass=typeof(type)==='string'?ig.global[type]:type;var newEnt=new(entityClass)();newEnt.init(ent.pos.x,ent.pos.y,{id:ent.id,owner:ent.owner,health:ent.health,stackSize:ent.stackSize,ai:true,attacks:ent.attacks,moves:ent.moves});newBoard.units.push(newEnt);}
newBoard.humanArmySize=this.humanArmySize;newBoard.computerArmySize=this.computerArmySize;ent=newBoard.getEntityById(move.unitId);if(move.type==='Move'){newBoard.moveUnit(ent,move.row,move.col);}
else if(move.type==='Attack'){var enemy=newBoard.attackUnit(ent,move.row,move.col);if(enemy.health<=0){if(enemy.owner===this.HUMAN)
newBoard.humanArmySize--;else
newBoard.computerArmySize--;var row=enemy.getRow();var col=enemy.getCol();delete newBoard.gameBoard[row][col];if(enemy.base===2){delete newBoard.gameBoard[row+1][col];}
else if(enemy.base===4){delete newBoard.gameBoard[row][col+1];delete newBoard.gameBoard[row+1][col];delete newBoard.gameBoard[row+1][col+1];}}}
else if(move.type==='End Turn'){newBoard.playerTurn=(newBoard.playerTurn===newBoard.HUMAN?newBoard.COMPUTER:newBoard.HUMAN);}
newBoard.move=move;return newBoard;};this.evaluate=function(depth){if(this.isGameOver()){return 1000*this.playerTurn*this.winningPlayer*(depth+1);}
var humanScore=0;var computerScore=0;var midRow=(ig.game.backgroundMaps[0].height/2|0)+.5;var midCol=(ig.game.backgroundMaps[0].width/2|0)+.5;var ent,score;for(var i=0;i<this.units.length;i++){ent=this.units[i];score=ent.cost*(ent.health/ent.maxHealth);if(ent.owner===this.HUMAN){humanScore+=score;}
else
computerScore+=score;}
if(this.playerTurn===this.COMPUTER){return computerScore-humanScore;}
else
return humanScore-computerScore;};this.isGameOver=function(){if(this.humanArmySize===0){this.winningPlayer=this.COMPUTER;return true;}
else if(this.computerArmySize===0){this.winningPlayer=this.HUMAN;return true;}
return false;};this.sign=function(num){return num?num<0?-1:1:0;};this.getEntityById=function(id){var entityId=typeof(id)==='string'?parseInt(id):id;var ent;for(var i=0;i<this.units.length;i++){ent=this.units[i];if(ent.id===entityId&&!ent._killed){break;}}
return ent;};this.canAtkSquare=function(unit,target){return unit.inAtkRange(target)&&this.gameBoard[target.row][target.col]&&this.gameBoard[target.row][target.col]!==-1&&this.getEntityById(this.gameBoard[target.row][target.col]).owner!==unit.owner;};this.canMoveSquare=function(unit,target){return unit.inMoveRange(target)&&!this.gameBoard[target.row][target.col]&&unit.getAdditionalCheck(target.row,target.col);};this.moveUnit=function(unit,row,col){var unitRow=unit.getRow();var unitCol=unit.getCol();var tilesize=32;delete this.gameBoard[unitRow][unitCol];if(this.base===2){delete this.gameBoard[unitRow+1][unitCol];}
else if(this.base===4){delete this.gameBoard[unitRow][unitCol+1];delete this.gameBoard[unitRow+1][unitCol];delete this.gameBoard[unitRow+1][unitCol+1];}
unit.pos.x=col*tilesize;unit.pos.y=row*tilesize;this.gameBoard[row][col]=unit.id;if(this.base===2){this.gameBoard[row+1][col]=unit.id;}
else if(this.base===4){this.gameBoard[row][col+1]=unit.id;this.gameBoard[row+1][col]=unit.id;this.gameBoard[row+1][col+1]=unit.id;}
unit.moves++;};this.attackUnit=function(unit,row,col){unit.turn=false;var ent=this.getEntityById(this.gameBoard[row][col]);var dmg=unit.rand(unit.damage.min,unit.damage.max);dmg-=(ent.defense/2);var minDmg=Math.ceil(unit.damage.min*.3)
dmg=dmg<minDmg?minDmg:dmg;ent.receiveDamage(dmg,unit);unit.attacks++;return ent;};},aspirationABNegascout:function(board,currentDepth,previous){var WINDOW_SIZE=100;var NEAR_INFINITY=9999;var alpha=previous-WINDOW_SIZE;var beta=previous+WINDOW_SIZE;while(true){var bestMove=this.abNegascout(board,currentDepth,alpha,beta);if(bestMove.score<=alpha){alpha=-NEAR_INFINITY;}
else if(bestMove.score>=beta){beta=NEAR_INFINITY;}
else{return bestMove;}}},aspirationABNegamax:function(board,currentDepth,previous){var WINDOW_SIZE=100;var NEAR_INFINITY=9999;var alpha=previous-WINDOW_SIZE;var beta=previous+WINDOW_SIZE;while(true){var bestMove=this.abNegamax(board,currentDepth,alpha,beta);if(bestMove.score<=alpha){alpha=-NEAR_INFINITY;}
else if(bestMove.score>=beta){beta=NEAR_INFINITY;}
else{return bestMove;}}},abNegamax:function(board,currentDepth,alpha,beta){var DEBUG=false;var maxDepth=3;if(DEBUG)console.log("\n*****************FIRST CALL TO GAME OVER*****************\n");var endGame=board.isGameOver();if(DEBUG)console.log("\n***************END FIRST CALL TO GAME OVER***************");if(endGame||currentDepth==0){var score=board.evaluate(currentDepth);if(DEBUG)console.log("SCORE AT THIS LEVEL: "+score);this.output+="<score: "+score+">";return{'score':score,'move':null};}
var bestMove=null;var bestScore=-Infinity;var moves=board.getMoves();for(var i=0;i<moves.length;i++){var move=moves[i];var newBoard=board.makeMove(move);if(DEBUG)console.log("NEW BOARD MOVE");var indent="";for(var spacer=0;spacer<maxDepth-currentDepth;spacer++)
indent+="  ";this.output+="\n"+indent+"<"+(board.playerTurn===-1?"HUMAN":"COMPUTER")+"-"+move.type+" ["+move.row+"]["+move.col+"]>";var newBestMove=this.abNegamax(newBoard,currentDepth-1,-beta,-Math.max(alpha,bestScore));var currentScore=-newBestMove.score;if(DEBUG)console.log("score: "+currentScore);if(DEBUG)console.log("bestScore: "+bestScore);if(currentScore>bestScore){bestScore=currentScore;bestMove=move;if(DEBUG)console.log("newBestMove: "+bestMove.row+", "+bestMove.col);if(bestScore>=beta){this.output+="\n"+indent+"<best "+(board.playerTurn===-1?"HUMAN":"COMPUTER")+" score: "+currentScore+">";return{'score':bestScore,'move':bestMove};}}}
this.output+="\n"+indent+"<best "+(board.playerTurn===-1?"HUMAN":"COMPUTER")+" score: "+currentScore+">";return{'score':bestScore,'move':bestMove};},abNegascout:function(board,currentDepth,alpha,beta){var DEBUG=false;var maxDepth=3;if(DEBUG)console.log("\n*****************FIRST CALL TO GAME OVER*****************\n");var endGame=board.isGameOver();if(DEBUG)console.log("\n***************END FIRST CALL TO GAME OVER***************");if(endGame||currentDepth==0){var score=board.evaluate(currentDepth);if(DEBUG)console.log("SCORE AT THIS LEVEL: "+score);this.output+="<score: "+score+">";return{'score':score,'move':null};}
var bestMove=null;var bestScore=-Infinity;var adaptiveBeta=beta;var moves=board.getMoves();for(var i=0;i<moves.length;i++){var move=moves[i];var newBoard=board.makeMove(move);if(DEBUG)console.log("NEW BOARD MOVE");var indent="";for(var spacer=0;spacer<maxDepth-currentDepth;spacer++)
indent+="  ";this.output+="\n"+indent+"<"+(board.playerTurn===-1?"HUMAN":"COMPUTER")+"-"+move.type+" ["+move.row+"]["+move.col+"]>";var newBestMove=this.abNegamax(newBoard,currentDepth-1,-adaptiveBeta,-Math.max(alpha,bestScore));var currentScore=-newBestMove.score;if(DEBUG)console.log("score: "+currentScore);if(DEBUG)console.log("bestScore: "+bestScore);if(currentScore>bestScore){if(adaptiveBeta==beta||currentDepth>=2){bestScore=currentScore;bestMove=move;if(DEBUG)console.log("newBestMove: "+bestMove.row+", "+bestMove.col);}
else{negativeBestMove=this.abNegascout(newBoard,currentDepth,-beta,-currentScore);bestScore=-negativeBestMove.score;}
if(bestScore>=beta){this.output+="\n"+indent+"<best "+(board.playerTurn===-1?"HUMAN":"COMPUTER")+" score: "+currentScore+">";return{'score':bestScore,'move':bestMove};}
adaptiveBeta=Math.max(alpha,bestScore)+1;}}
this.output+="\n"+indent+"<best "+(board.playerTurn===-1?"HUMAN":"COMPUTER")+" score: "+currentScore+">";return{'score':bestScore,'move':bestMove};},Node:function(row,col){this.row=row||0;this.col=col||0;},NodeRecord:function(){this.node={};this.connection={};this.costSoFar=0;this.estimatedCost=0;},Connection:function(cost,fromNode,toNode){this.cost=cost||0;this.fromNode=fromNode||0;this.toNode=toNode||0;},processData:function(){for(var row=0;row<this.data.length;row++){this.nodes[row]=[];for(var col=0;col<this.data[row].length;col++){this.nodes[row][col]=new this.Node(row,col);}}
this.processConnections();},processConnections:function(){for(var row=0;row<this.data.length;row++){this.connections[row]=[];for(var col=0;col<this.data[row].length;col++){var node=this.nodes[row][col];var connections=[];for(var conRow=node.row-1;conRow<=node.row+1;conRow++){if(this.nodes[conRow]){for(var conCol=node.col-1;conCol<=node.col+1;conCol++){if(this.nodes[conRow][conCol]&&!this.data[conRow][conCol]&&this.nodes[conRow][conCol]!=node){connections.push(new this.Connection(1,node,this.nodes[conRow][conCol]));}}}}
this.connections[row][col]=connections;}}},getConnection:function(node){var connections=[];for(var conRow=node.row-1;conRow<=node.row+1;conRow++){if(this.nodes[conRow]){for(var conCol=node.col-1;conCol<=node.col+1;conCol++){if(this.nodes[conRow][conCol]&&!this.data[conRow][conCol]&&this.nodes[conRow][conCol]!=node){connections.push(new this.Connection(1,node,this.nodes[conRow][conCol]));}}}}
return connections;},getConnections:function(node){return this.connections[node.row][node.col];},Heuristic:function(goalNode){if(!goalNode){throw new Error("You must instantiate a heuristic with a goalNode");}
var goalNode=goalNode;this.estimate=function(node){var length=Math.abs(node.row-goalNode.row);var height=Math.abs(node.col-goalNode.col);return Math.sqrt(Math.pow(length,2)+Math.pow(height,2));}},findPath:function(start,end,heuristic){if(!start){throw new Error("You must pass a start node");}
if(!end){throw new Error("You must pass an end node");}
if(!heuristic){throw new Error("You must pass a heuristic");}
var ctx=document.getElementById('pathfinding').getContext('2d');var tilesize=32;var count=1;var startRecord=new this.NodeRecord();startRecord.node=start;startRecord.connection=null;startRecord.costSoFar=0;startRecord.estimatedCost=heuristic.estimate(start);var open=new PriorityQueue({low:true});var closed=new PriorityQueue({low:true});open.push(startRecord,startRecord.estimatedCost);ctx.fillStyle="rgba(0, 255, 0, .4)";ctx.fillRect(startRecord.node.col*tilesize,startRecord.node.row*tilesize,tilesize,tilesize);ctx.font="10pt Calibri";ctx.fillStyle='black';ctx.fillText(count,startRecord.node.col*tilesize+(tilesize/2),startRecord.node.row*tilesize+(tilesize/2));while(open.size()>0){var current=open.top();if(current.node===end)
break;var connections=this.getConnection(current.node);for(var i=0;i<connections.length;i++){var connection=connections[i];var endNode=connection.toNode;var endNodeCost=current.costSoFar+connection.cost;var endNodeRecord,endNodeHeuristic;if(closed.contains(endNode)){endNodeRecord=closed.find(endNode);if(endNodeRecord.costSoFar<=endNodeCost)
continue;closed.remove(endNodeRecord);endNodeHeuristic=endNodeRecord.estimatedCost-endNodeRecord.costSoFar;}
else if(open.contains(endNode)){endNodeRecord=open.find(endNode);if(endNodeRecord.costSoFar<=endNodeCost)
continue;endNodeHeuristic=endNodeRecord.cost-endNodeRecord.costSoFar;}
else{endNodeRecord=new this.NodeRecord();endNodeRecord.node=endNode;endNodeHeuristic=heuristic.estimate(endNode);}
endNodeRecord.costSoFar=endNodeCost;endNodeRecord.connection=connection;endNodeRecord.estimatedCost=endNodeCost+endNodeHeuristic;open.push(endNodeRecord,endNodeRecord.estimatedCost);ctx.fillStyle="rgba(255, 255, 255, .4)";ctx.fillRect(endNodeRecord.node.col*tilesize,endNodeRecord.node.row*tilesize,tilesize,tilesize);}
open.remove(current);closed.push(current,current.estimatedCost);if(count>1){ctx.fillStyle="rgba(255, 0, 0, .4)";ctx.fillRect(current.node.col*tilesize,current.node.row*tilesize,tilesize,tilesize);ctx.font="10pt Calibri";ctx.fillStyle='black';ctx.fillText(count,current.node.col*tilesize+(tilesize/2),current.node.row*tilesize+(tilesize/2));}
count++;}
ctx.clearRect(current.node.col*tilesize,current.node.row*tilesize,tilesize,tilesize);ctx.fillStyle="rgba(255, 0, 0, .4)";ctx.fillRect(current.node.col*tilesize,current.node.row*tilesize,tilesize,tilesize);ctx.font="10pt Calibri";ctx.fillStyle='black';ctx.fillText(count,current.node.col*tilesize+(tilesize/2),current.node.row*tilesize+(tilesize/2));if(current.node!==end){return-1;}
else{var path=[];while(current.node!=start){path.push(current.connection);current=closed.find(current.connection.fromNode);}
path.reverse();ctx.strokeStyle='blue';ctx.beginPath();for(var i=path.length-1;i>=0;i--){ctx.moveTo((path[i].fromNode.col+.5)*tilesize,(path[i].fromNode.row+.5)*tilesize);ctx.lineTo((path[i].toNode.col+.5)*tilesize,(path[i].toNode.row+.5)*tilesize);}
ctx.stroke();return path;}}});});

// lib/game/levels/main.js
ig.baked=true;ig.module('game.levels.main').requires('impact.image').defines(function(){LevelMain={"entities":[],"layer":[{"name":"main","width":64,"height":36,"linkWithCollision":false,"visible":1,"tilesetName":"media/scitilesgrey02.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[2098,2099,2098,2099,2100,18,17,18,18,17,18,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,10,9,17,18,17,18,17,18],[3057,98,97,3060,2180,98,97,98,98,97,98,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,90,89,97,98,97,98,97,98],[17,18,17,18,2260,18,17,18,18,17,18,18,17,18,18,17,18,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18],[97,98,97,98,2180,18,17,18,18,17,18,17,18,18,17,18,18,18,17,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3065,3066,3067,3066,3067],[17,18,17,3140,2260,98,97,98,98,97,98,97,98,98,97,98,98,98,97,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,17,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,18,17,18,18,17,18,17,18,18,17,18,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,98,98,98,98,98,97,98,98,98,97,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,1138,1139,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1139,3145,4086,4087,4086,4086],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4166],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,1378,1379,1378,1379,1378,1378,1379,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1378,1379,3225,4166,4167,4166,4167],[17,18,17,18,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,17,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,917,918,919,920,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,2101,2102,2103,2102,2103,2102,2103,2104,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,2181,2182,2183,2184,2181,2182,2183,2184,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,2261,2262,2263,2264,2261,2262,2263,2264,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4086],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,2181,2342,2343,2344,2341,2342,2343,2184,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4166],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,2261,2102,2103,2104,2101,2102,2103,2264,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,2181,2182,2183,2184,2181,2182,2183,2184,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,2261,2262,2263,2264,2261,2262,2263,2264,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,2341,2342,2343,2342,2343,2342,2343,2344,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,677,678,679,664,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,824,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,824,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,97,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,18,17,18,17,18,17,18,17,18,17,18,17,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,17,757,18,17,824,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,98,2180,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1138,1139,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,3140,2260,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,757,18,17,744,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3145,4086,4087,4086,4087],[97,98,97,3220,2180,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,3225,4166,4167,4166,4167],[17,18,17,18,2260,1378,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1379,1378,1379,1379,757,18,17,744,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,3305,3306,3307,3306,3307],[97,98,97,98,2180,98,97,98,97,98,97,98,97,98,97,98,97,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,2897,2898,97,757,98,97,744,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,17,18,17,18,17],[2977,18,17,2978,2260,18,17,18,17,18,17,18,17,18,17,18,17,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,2977,2978,17,757,18,17,744,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,18,17,97,98,97,98,97],[2338,2339,2338,2339,2340,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,757,98,97,824,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98,97,98]]},{"name":"walls","width":64,"height":36,"linkWithCollision":false,"visible":1,"tilesetName":"media/scitilesgrey01.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,453,454,455,454,455,456,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,453,456,578,578,579,579,580],[0,0,0,0,0,485,486,487,486,487,488,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,357,358,610,610,611,611,612],[0,0,0,0,0,577,578,578,579,579,580,0,0,0,0,577,577,578,578,579,579,580,577,578,578,579,579,580,577,578,578,579,579,580,577,578,578,579,579,580,577,578,578,579,579,580,577,578,578,579,579,580,577,578,578,579,579,579,580,0,0,0,0,0],[0,0,0,0,0,609,610,610,611,611,612,0,0,0,0,609,609,610,610,611,611,612,609,610,610,611,611,612,609,610,610,611,611,612,609,610,610,611,611,612,609,610,610,611,611,612,609,610,610,611,611,612,609,610,610,611,611,611,612,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,389,390,391,392,0,0,0,0,389,390,390,391,390,391,392,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,453,325,326,424,0,0,0,0,453,454,455,454,325,326,424,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,389,390,391,390,391,392,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,453,357,358,424,0,0,0,0,485,486,487,359,357,358,424,0,0,0,0,0,0,0,0,0,0,0,0,0,389,390,390,392,0,0,0,0],[0,0,0,0,0,421,454,455,454,455,456,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,453,455,455,424,0,0,0,0,577,578,580,453,454,455,456,0,0,0,0,0,0,0,0,0,0,0,0,0,421,422,422,328,390,391,390,391],[0,0,0,0,0,453,422,325,326,423,328,390,391,390,391,391,392,0,0,0,0,0,0,0,0,0,0,0,453,455,455,424,0,0,0,0,609,610,612,453,455,455,424,0,0,0,0,0,0,0,0,0,0,0,0,0,421,422,422,422,422,422,422,422]]},{"name":"stairs","width":64,"height":36,"linkWithCollision":false,"visible":1,"tilesetName":"media/scitilesgrey04.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,483,484,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,245,246,247,248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,499,500,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,265,266,265,266,265,0,0,0,0,0,0,0,0,0,0,0,0,0,0,265,266,265,266,265,266,265,266,0,0,0,0,0,0,0,0,0,0,0,0,0,0,265,265,266,265,266,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,281,282,281,282,281,0,0,0,0,0,0,0,0,0,0,0,0,0,0,281,282,281,282,281,282,281,282,0,0,0,0,0,0,0,0,0,0,0,0,0,0,281,281,282,281,282,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,86,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,86,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,68,0,0,0,0,0,0,0,481,482,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,83,84,0,0,0,0,0,0,0,497,498,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[194,195,196,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,74,0,0,0,0,0,0,0,0,0,0],[210,211,212,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,73,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,90,0,0,0,0,0,0,0,0,0,0],[226,227,228,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,89,90,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[242,243,244,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,67,68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,481,482,0,0,0,0,0,0,83,84,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,497,498,0,0,0,0,0,0,69,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,86,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,85,86,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,69,70,0,0,0,0,0,0,0,0,73,74,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"env","width":64,"height":36,"linkWithCollision":false,"visible":true,"tilesetName":"media/scitilesbe.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,695,696,0,0,0],[0,0,0,0,0,0,1447,1448,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,775,776,0,0,0],[0,0,0,0,0,0,1527,1528,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1223,1224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,695,696,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,775,776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,491,47,48,47,48,492,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,571,127,128,127,128,572,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,46,45,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,491,207,208,207,208,492,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,126,125,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,571,287,288,287,288,572,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,45,46,45,46,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,491,492,491,492,491,492,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,125,126,125,126,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,571,572,571,572,571,572,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,525,526,527,528,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,605,606,607,608,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,963,964,963,964,963,964,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1043,1044,1043,1044,1043,1044,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,963,964,963,964,963,964,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1043,1044,1043,1044,1043,1044,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,963,964,963,964,963,964,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1043,1044,1043,1044,1043,1044,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4169,4170,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1447,1448,0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,4405,4406,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1527,1528,0,0,0,0,0,0,0,0,0,0,0,4249,4250,0,0,0,4485,4486,0,0,0,0,0,0,0,0]]},{"name":"env2","width":64,"height":36,"linkWithCollision":false,"visible":true,"tilesetName":"media/scitilesbe.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,695,696,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,775,776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,695,696,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,775,776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,58,59,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,138,139,140,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,58,59,220,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,137,138,139,140,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,217,218,219,220,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,297,298,299,300,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2085,2086,2087,2088,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2165,2166,2167,2168,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"env3","width":64,"height":36,"linkWithCollision":false,"visible":true,"tilesetName":"media/scitilesbe.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,695,696,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,775,776,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1457,1458,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,1537,1538,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]},{"name":"shadow","width":64,"height":36,"linkWithCollision":false,"visible":1,"tilesetName":"media/scitilesgrey03.png","repeat":false,"preRender":false,"distance":"1","tilesize":16,"foreground":false,"data":[[0,0,0,0,0,0,0,0,0,0,0,4,263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,263,0,857,858,0],[0,0,0,0,0,0,0,0,0,0,0,6,295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,295,0,889,890,0],[0,0,0,0,0,891,892,0,89,90,0,4,6,0,0,0,0,0,0,959,960,0,0,385,386,926,927,928,0,0,263,0,0,0,0,0,0,0,0,793,794,795,796,385,386,0,0,0,0,0,0,925,263,0,0,0,0,900,0,38,38,38,38,38],[0,0,0,0,0,0,0,0,121,122,0,6,6,0,0,0,0,0,0,0,0,0,0,417,418,0,0,0,0,0,295,0,0,0,0,0,0,0,0,825,826,827,828,417,418,0,0,0,0,0,0,957,295,0,0,0,0,0,0,6,0,0,0,0],[0,0,0,0,0,326,5,6,4,5,6,38,6,0,0,0,326,5,6,4,5,6,5,6,4,5,5,6,4,5,6,0,0,0,0,0,0,0,326,5,5,6,4,5,5,6,4,5,6,6,6,6,6,0,0,0,0,326,5,6,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,977,978,979,980,0,0,0,0,0,0,0,0,0,0,955,956,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1009,1010,1011,1012,0,0,0,0,0,0,0,0,0,0,987,988,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,326,5,6,4,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,785,786,787,788,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,817,818,819,820,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,849,850,851,852,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,881,882,883,884,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,347,348,347,348,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,263,0,0,0,0,0,0,0,0,0,0,263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,263,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,295,0,0,0,0,891,892,0,0,0,0,295,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,401,402,403,404,405,406,407,408,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,593,594,405,406,405,406,405]]},{"name":"collision","width":32,"height":18,"linkWithCollision":false,"visible":0,"tilesetName":"","repeat":false,"preRender":false,"distance":1,"tilesize":32,"foreground":false,"data":[[0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],[0,0,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,0,0,1,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,1,1,0,0],[0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1]]}]};LevelMainResources=[new ig.Image('media/scitilesgrey02.png'),new ig.Image('media/scitilesgrey01.png'),new ig.Image('media/scitilesgrey04.png'),new ig.Image('media/scitilesbe.png'),new ig.Image('media/scitilesbe.png'),new ig.Image('media/scitilesbe.png'),new ig.Image('media/scitilesgrey03.png')];});

// lib/game/main.js
ig.baked=true;ig.module('game.main').requires('impact.game','game.entities.marine','game.entities.shotgun','game.entities.sniper','game.entities.medic','game.entities.mech','game.entities.tank','game.entities.corvette','game.entities.ai','game.levels.main').defines(function(){MyGame=ig.Game.extend({ai:new AI(),board:{},mouseUp:true,hoverDelay:50,hoverTimer:0,totalPoints:1000,numUnits:0,playSound:true,previous:0,earthen:[],earthenNames:['EntityMarine','EntityShotgun','EntitySniper','EntityMedic','EntityMech','EntityTank','EntityCorvette'],currentPlayer:1,selectedUnit:0,selectedId:0,player1Points:0,player2Points:0,player1ArmyComposition:{},player2ArmyComposition:{},mainMenuAudio:new ig.Sound('media/mainMenu.*',false),gameAudio:new ig.Sound('media/DST-AngryMod.*',false),init:function(){ig.music.add(this.mainMenuAudio,'menu');ig.music.add(this.gameAudio,'ingame');ig.music.loop=true;try{if('localStorage'in window&&window['localStorage']!==null){this.playSound=(localStorage['chronos.playSound']==="true");if(this.playSound){ig.music.volume=1;ig.music.play('menu');$('#sound').parent().addClass('sound-on').removeClass('sound-off');}
else{ig.music.volume=0;$('#sound').parent().addClass('sound-off').removeClass('sound-on');}}}catch(e){ig.music.volume=1;ig.music.play('menu');$('#sound').parent().addClass('sound-on').removeClass('sound-off');}
ig.input.bind(ig.KEY.MOUSE1,'leftButton');$('.total-points').html(this.totalPoints);this.numUnits=this.earthenNames.length;for(var i=0;i<this.numUnits;i++){this.player1ArmyComposition[this.earthenNames[i]]=0;this.player2ArmyComposition[this.earthenNames[i]]=0;}
this.loadLevel(LevelMain);this.earthen=[];this.earthen[0]=new EntityMarine();this.earthen[1]=new EntityShotgun();this.earthen[2]=new EntitySniper();this.earthen[3]=new EntityMedic();this.earthen[4]=new EntityMech();this.earthen[5]=new EntityTank();this.earthen[6]=new EntityCorvette();},start:function(){var i,len,length,x,y,col,row,settings,row,col,ent,stackSize;var s=ig.system.scale;var tilesize=32;var height=this.backgroundMaps[0].height;this.entities=[];this.board=new this.ai.Board();for(i=0;i<this.backgroundMaps[0].width;i++){this.board.gameBoard[height][i]=-1;}
for(i=0;i<height;i++){this.board.gameBoard[i][this.backgroundMaps[0].width]=-1;}
for(i=0,row=0,col=0,len=this.numUnits;i<len;i++){ent=this.earthenNames[i];stackSize=this.player1ArmyComposition[ent];if(stackSize>0){settings={owner:this.board.HUMAN,stackSize:stackSize};this.spawnEntity(ent,col*tilesize,(2*row+1)*tilesize,settings);row++;}}
settings={owner:2};for(i=0,row=0,col=30,len=this.numUnits;i<len;i++){ent=this.earthenNames[i];stackSize=this.player2ArmyComposition[ent];if(stackSize>0){settings={owner:this.board.COMPUTER,stackSize:stackSize};this.spawnEntity(ent,col*tilesize,(2*row+1)*tilesize,settings);row++;}}
for(var i=0,len=this.entities.length;i<len;i++){if(this.entities[i].owner===1){this.player1++;}
else{this.player2++;}}
for(var i=0,len=this.entities.length;i<len;i++){x=this.entities[i].pos.x*s-this.screen.x*s;y=this.entities[i].pos.y*s-this.screen.y*s;col=Math.floor(x/tilesize);row=Math.floor(y/tilesize);this.board.gameBoard[row][col]=this.entities[i].id;if(this.entities[i].base===2){this.board.gameBoard[row+1][col]=this.entities[i].id;}
else if(this.entities[i].base===4){this.board.gameBoard[row][col+1]=this.entities[i].id;this.board.gameBoard[row+1][col]=this.entities[i].id;this.board.gameBoard[row+1][col+1]=this.entities[i].id;}}
for(i=0,len=ig.game.collisionMap.data.length;i<len;i++){for(j=0,length=ig.game.collisionMap.data[i].length;j<length;j++){if(ig.game.collisionMap.data[i][j]){this.board.gameBoard[i][j]=-1}}}
this.ai.data=ig.game.board.gameBoard;this.ai.processData();this.board.init();this.board.units=this.entities;this.currentTurn=0;$('.menu').visible();$('#unit-panel').addClass('ingame');$('.cost').parent().hide();$('.game-over').invisible();$('#continue').visible();$('#endTurn').visible();ig.system.startRunLoop();ig.music.stop();ig.music.play('ingame');},nextTurn:function(){if(this.board.isGameOver()){console.log("GAME OVER!");return;}
if(this.board.playerTurn===this.board.COMPUTER)
this.takeAITurn();},endTurn:function(){this.board.playerTurn=(this.board.playerTurn===this.board.HUMAN?this.board.COMPUTER:this.board.HUMAN);this.board.humanActions=0;this.board.computerActions=0;for(var i=0;i<this.entities.length;i++)
this.entities[i].resetActions();if(this.board.isGameOver()){console.log("GAME OVER!");return;}
if(this.board.playerTurn===this.board.COMPUTER){$('.end-turn').hide();this.takeAITurn();}
else{$('.end-turn').show();}},takeAITurn:function(){ig.game.selectedUnit.turn=false;ig.game.selectedUnit={};var maxDepth=3;this.ai.output='';console.time('AB Negascout Aspiration Game Tree Algorithm');var bestMove=this.ai.aspirationABNegascout(this.board,0+maxDepth,this.previous);console.timeEnd('AB Negascout Aspiration Game Tree Algorithm');console.log(this.ai.output);console.log("%c<best move: "+bestMove.move.type+" ["+bestMove.move.row+"]["+bestMove.move.col+"] score: "+bestMove.score+">",'color: #FF0000');this.previous=bestMove.score;ent=ig.game.getEntityById(bestMove.move.unitId);if(this.board.playerTurn===this.board.COMPUTER){if(bestMove.move.type==='Move'){ent.moveUnit(bestMove.move.row,bestMove.move.col);}
else if(bestMove.move.type==='Attack'){ent.turn=true;var enemy=ent.attackUnit(bestMove.move.row,bestMove.move.col);if(enemy.health<=0){if(enemy.owner===this.board.HUMAN)
this.board.humanArmySize--;else
this.board.computerArmySize--;var row=enemy.getRow();var col=enemy.getCol();delete this.board.gameBoard[row][col];if(enemy.base===2){delete this.board.gameBoard[row+1][col];}
else if(enemy.base===4){delete this.board.gameBoard[row][col+1];delete this.board.gameBoard[row+1][col];delete this.board.gameBoard[row+1][col+1];}}}
else if(bestMove.move.type==='End Turn')
this.endTurn();}},restart:function(){this.player1Army=[];this.player1Points=0;this.player1=0;this.player2Army=[];this.player2Points=0;this.player2=0;for(var i=0;i<this.numUnits;i++){this.player1ArmyComposition[i]=0;this.player2ArmyComposition[i]=0;}
this.board.playerTurn=this.board.HUMAN;$('#ingame-menu').hide();$('.current-points').html(0);$('.num-purchased').html(0);$('#unit-panel').removeClass('ingame');$('.end-turn').show();$('#pathfinding').hide();var context=document.getElementById('pathfinding').getContext('2d');context.clearRect(0,0,1024,576);this.start();},update:function(){this.parent();if(!this.board.humanArmySize||!this.board.computerArmySize){$('#ingame-menu').show();$('.game-over').visible();$('#continue').invisible();$('#ingame-menu .player-number').html(!this.board.humanArmySize?2:1);ig.system.stopRunLoop();ig.music.stop();ig.music.play('menu');}},draw:function(){this.parent();},rand:function(low,high){return Math.floor(Math.random()*(high-low+1)+low);},showUnitStats:function(ent){$('.name').html(ent.name);if(ent.name==='Mech Unit'){$('.unit-pic').css('background-position','-'+(12*50)+'px');}
else if(ent.name==="Tank"){$('.unit-pic').css('background-position','-'+(15*50)+'px');}
else if(ent.name==="Corvette"){$('.unit-pic').css('background-position','-'+(18*50)+'px');}
else{$('.unit-pic').css('background-position','-'+(Math.floor(ent.anims.idle.tile/3)*3*50)+'px');}
$('.health').html(ent.health);$('.attack').html(ent.attack);$('.defense').html(ent.defense);$('.damage').html(ent.damage.min*(ent.stackSize||1)+"-"+ent.damage.max*(ent.stackSize||1));$('.range').html(ent.range);$('.movement').html(ent.movement);$('.speed').html(ent.speed);$('.cost').html(ent.cost);if(ent.name==="Medic"){$('.special').parent().show();$('.special').html("Can heal a friendly unit within movement range.");$('.modify-count').addClass('special-padding');}
else{$('.special').parent().hide();$('.modify-count').removeClass('special-padding');}
$('#unit-panel').show();}});MyLoader=ig.Loader.extend({end:function(){$('#main-menu').show();$('#menu').show();this.parent();ig.system.stopRunLoop();$('canvas').on('mouseup',function(event){ig.game.mouseUp=true;});$('canvas').on('mousedown',function(event){ig.game.mouseUp=false;});$('.ingame-menu').on('click',function(event){ig.system.stopRunLoop();$('#ingame-menu').show();$('#unit-panel').hide();ig.music.pause();ig.music.play('menu');});$('#continue').on('click',function(event){ig.system.startRunLoop();$('#ingame-menu').hide();ig.music.pause();ig.music.play('ingame');});$('#restart').on('click',function(event){ig.game.restart();ig.music.stop();ig.music.play('ingame');});$('#goto-main-menu').on('click',function(event){$('#ingame-menu').hide();$('.menu').invisible();$('#main-menu').show();$('.end-turn').hide();$('.current-points').html(0);$('.num-purchased').html(0);$('#unit-panel').removeClass('ingame');ig.game.player1Army=[];ig.game.player1Points=0;ig.game.player1=0;ig.game.player2Army=[];ig.game.player2Points=0;ig.game.player2=0;for(var i=0;i<ig.game.numUnits;i++){ig.game.player1ArmyComposition[ig.game.earthenNames[i]]=0;ig.game.player2ArmyComposition[ig.game.earthenNames[i]]=0;}
ig.game.board.playerTurn=ig.game.board.HUMAN;ig.game.currentPlayer=1;ig.music.pause();ig.music.play('menu');});$('.back').on('click',function(event){$('#how-to-screen').hide();$('#options-screen').hide();$('#credits-screen').hide();$('#main-menu').show();});$('#sound').on('click',function(event){if(ig.game.playSound){ig.music.volume=0;ig.music.pause();ig.game.playSound=false;$('#sound').parent().addClass('sound-off').removeClass('sound-on');}
else{ig.music.volume=1;ig.music.play();ig.game.playSound=true;$('#sound').parent().addClass('sound-on').removeClass('sound-off');}
localStorage['chronos.playSound']=ig.game.playSound;});$('#play').on('click',function(event){$('#main-menu').hide();$('#selection-screen').show();$('.player-number').html(1);$('.cost').parent().show();});$('#how-to-play').on('click',function(event){$('#main-menu').hide();$('#how-to-screen').show();});$('#credits').on('click',function(event){$('#main-menu').hide();$('#credits-screen').show();});$("#help").on({mouseenter:function()
{$(".help-menu").show();},mouseleave:function()
{$(".help-menu").hide();}});$('.select-unit').on('click',function(even){var id=parseInt($(this).parent().attr('data-id'));var ent=ig.game.earthen[id];ig.game.showUnitStats(ent);ig.game.selectedUnit=ent;ig.game.selectedId=id;$('.select-unit').css('border','none');$(this).css('border','1px solid yellow');$('.modify-count').visible();});$('#add').on('click',function(event){var purchasedDiv=$('div[data-id="'+ig.game.selectedId+'"]').next();var purchased=parseInt(purchasedDiv.html())+1;var points=parseInt($('.current-points').html())+ig.game.selectedUnit.cost;if(points<=ig.game.totalPoints){$('.current-points').html(points);purchasedDiv.html(purchased);if(ig.game.currentPlayer===1){ig.game.player1ArmyComposition[ig.game.selectedUnit.className]++;ig.game.player1Points=points;}
else if(ig.game.currentPlayer===2){ig.game.player2ArmyComposition[ig.game.selectedUnit.className]++;ig.game.player2Points=points;}}});$('#subtract').on('click',function(event){var purchasedDiv=$('div[data-id="'+ig.game.selectedId+'"]').next();var purchased=parseInt(purchasedDiv.html())-1;var points=parseInt($('.current-points').html())-ig.game.selectedUnit.cost;if(purchased>=0){$('.current-points').html(points);purchasedDiv.html(purchased);if(ig.game.currentPlayer===1){ig.game.player1ArmyComposition[ig.game.selectedUnit.className]--;ig.game.player1Points=points;}
else if(ig.game.currentPlayer===2){ig.game.player2ArmyComposition[ig.game.selectedUnit.className]--;ig.game.player2Points=points;}}});$('#done').on('click',function(event){$('#unit-panel').hide();$('.modify-count').invisible();$('.select-unit').css('border','none');$('.confirm').show();});$('#cancel').on('click',function(event){$('.confirm').hide();});$('#confirm').on('click',function(event){if(ig.game.currentPlayer===1){ig.game.currentPlayer=2;$('.player-number').html(2);for(var i=0;i<ig.game.numUnits;i++){$('div[data-id="'+i+'"]').next().html(ig.game.player2ArmyComposition[ig.game.earthenNames[i]]);}
$('.current-points').html(ig.game.player2Points);}
else if(ig.game.currentPlayer===2){if(ig.game.player1Points>0&&ig.game.player2Points>0){$('#selection-screen').hide();ig.game.start();}
else{$('.no-units').show();ig.game.currentPlayer=(ig.game.player1Points===0?1:2);$('.player').html(ig.game.currentPlayer);}}
$('.confirm').hide();});$('#ok').on('click',function(event){$('.no-units').hide();$('.player-number').html(ig.game.currentPlayer);$('.num-purchased').html(0);$('.current-points').html(0);});$('.select-back').on('click',function(event){if(ig.game.currentPlayer===2){ig.game.currentPlayer=1;$('#unit-panel').hide();$('.modify-count').invisible();$('.select-unit').css('border','none');$('.player-number').html(ig.game.currentPlayer);$('.current-points').html(ig.game.player1Points);for(var i=0;i<ig.game.numUnits;i++){$('div[data-id="'+i+'"]').next().html(ig.game.player1ArmyComposition[ig.game.earthenNames[i]]);}}
else if(ig.game.currentPlayer===1){$('#selection-screen').hide();$('#unit-panel').hide();$('.modify-count').invisible();$('.select-unit').css('border','none');$('#main-menu').show();}});}});var img=new ig.Image('media/main-screen.png');var img=new ig.Image('media/how-to-play.png');var img=new ig.Image('media/unit-select.png');var img=new ig.Image('media/credits.png');var img=new ig.Image('media/units.png');var img=new ig.Image('media/soundOn.png');var img=new ig.Image('media/soundOff.png');if(ig.ua.mobile){ig.Sound.enabled=false;$('body').addClass('mobile');}
ig.main('#canvas',MyGame,60,1024,576,1,MyLoader);var canvas=$('#canvas');$('#main-menu, #how-to-screen, #selection-screen, #credits-screen, #options-screen, #ingame-menu').css('width',canvas.width()).css('height',canvas.height());$('.canvas-wrapper').css('width',canvas.width()+5).css('height',canvas.height()+5);jQuery.fn.visible=function(){return this.css('visibility','visible');}
jQuery.fn.invisible=function(){return this.css('visibility','hidden');}
jQuery.fn.visibilityToggle=function(){return this.css('visibility',function(i,visibility){return(visibility=='visible')?'hidden':'visible';});}});